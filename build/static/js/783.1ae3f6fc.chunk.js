"use strict";(self.webpackChunkoasis_front=self.webpackChunkoasis_front||[]).push([[783],{23074:(e,a,s)=>{s.d(a,{Z:()=>j});var n=s(72791),r=s(61889),o=s(92506),i=s(81724),l=s(87284),t=s(38314),c=s(32325),d=s(96172),m=s(40720),u=s(57689),p=s(80184);const x=i.Ry({}),b=t.Z.seguridad.usuarios.base,h={name:"",email:"",role:"",password:"",compania_id:1,roles:[]},j=(0,d.p5)((0,d.Tg)((e=>{let{id:a,doGet:s,genericException:i,appSuccess:d,doPost:j,doPut:g,appInfo:f,refresh:w}=e;const Z=(0,u.s0)(),[P,R]=(0,n.useState)(h),y=(0,n.useCallback)((async()=>{const e={url:t.Z.seguridad.usuarios.initFormComponent,data:a?{id:a}:{}};return await s(e)}),[s,a,w]),C=(0,n.useCallback)((async()=>{try{const{user:e,roles:s}=await y(),{name:n,email:r,role_id:o}=e,i=s.map((e=>({value:e.id,label:e.name})));R({id:a||null,name:n||"",email:r||"",role:o||"",roles:i})}catch(e){i(e)}}),[i,y]);(0,n.useEffect)((()=>{C()}),[C]);const k=e=>{Z("".concat("/app/seguridad/usuarios","/edit/").concat(e),{replace:!1})},{isLoading:N,roles:_}=P;return N?(0,p.jsx)(l.aN,{}):(0,p.jsx)(o.J9,{enableReinitialize:!0,initialValues:P,validationSchema:x,onSubmit:async e=>{const s=(e=>{const{name:a,email:s,password:n,role:r,username:o}=e;return{name:a,email:s,password:n,confirm_password:n,role_id:r,username:o}})(e),n={url:a?"".concat(b,"/").concat(a):b,data:s},r=a?g:j;try{const e=await r(n);a?(f(c.Z.crud.update),k(e.id)):(d(c.Z.crud.new),k(e.id))}catch(o){console.log("ERROR AL GUARDAR "+o),i(o)}},children:e=>(0,p.jsxs)(o.l0,{children:[(0,p.jsx)(m.Au,{formProps:e}),(0,p.jsx)(r.ZP,{container:!0,direction:"row",spacing:2,children:(0,p.jsxs)(r.ZP,{container:!0,item:!0,spacing:2,children:[(0,p.jsx)(r.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,p.jsx)(o.gN,{label:"Nombre",name:"name",component:l.dn})}),(0,p.jsx)(r.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,p.jsx)(o.gN,{label:"Correo",name:"email",component:l.dn})}),(0,p.jsx)(r.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,p.jsx)(o.gN,{label:"Contrase\xf1a",name:"password",component:l.dn})}),(0,p.jsx)(r.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,p.jsx)(o.gN,{label:"Rol",name:"role",component:m.Ky,items:_})})]})})]})})})))},36783:(e,a,s)=>{s.r(a),s.d(a,{default:()=>d});s(72791);var n=s(87284),r=s(30808),o=s(23074),i=s(80184);const{title:l,createTitle:t}=r.default.seguridad.rol,c=[{label:"Seguridad"},{label:l}];const d=function(){return(0,i.jsx)(n.cc,{title:t,breadcrumbs:c,children:(0,i.jsx)(o.Z,{})})}}}]);
//# sourceMappingURL=783.1ae3f6fc.chunk.js.map