"use strict";(self.webpackChunkoasis_front=self.webpackChunkoasis_front||[]).push([[825],{24825:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var i=a(72791),s=a(96172),n=a(87284),r=a(30808),d=a(57689),l=(a(85698),a(61889)),c=a(57621),o=a(46232),u=a(80184);const{title:m,updateTitle:x}=r.default.transactions.evaluations,_=[{label:"Maestros"},{label:m}];const p=(0,s.p5)((0,s.Tg)((function(){const{id:e}=(0,d.UO)(),[t,a]=(0,i.useState)(!1),[s,r]=(0,i.useState)(!1),m=(0,i.useRef)();return(0,u.jsx)(n.cc,{title:x,breadcrumbs:_,withOutCard:!0,children:(0,u.jsx)(l.ZP,{container:!0,spacing:2,sx:{pb:2,minHeight:250},children:(0,u.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,u.jsx)(c.Z,{sx:{p:3,minHeight:"100%"},children:(0,u.jsx)(o.Z,{id:e,refresh:m,setEditable:a,setViewMode:r,viewMode:s})})})})})})))},46232:(e,t,a)=>{a.d(t,{Z:()=>N});var i=a(72791),s=a(61889),n=a(92506),r=a(81724),d=a(87284),l=a(38314),c=a(32325),o=a(96172),u=a(40720),m=a(57689),x=a(82337),_=a(43849),p=a(92983),h=a(80184);const g=r.Ry({code:r.Z_().required("Codigo es requerido"),patient_id:r.Z_().required("Paciente es requerido"),creation_date:r.Z_().required("Fecha de Creacion es requerido"),phase_id:r.Z_().required("Fase es requerido"),target_id:r.Z_().required("Objetivo es requerido"),start_date:r.Z_().required("Fecha inicio es requerido"),end_date:r.Z_().required("Fecha final es requerido"),clinical_team:r.Z_().required("Apreciacion Equipo Clinico es requerido"),achievement:r.Z_().required("Logros y Dificultades es requerido"),strategy:r.Z_().required("Estrategias Utilizadas es requerido"),requirement:r.Z_().required("Exigencias es requerido"),test:r.Z_().required("Evaluacion es requerido"),status:r.Z_().required("Estado es requerido")}),Z=l.Z.transactions.evaluations.base,j="".concat(Z,"/targets-by-phase");let b=[],q=[],v=[],P=[{label:"Positivo",value:"Positivo"},{label:"Negativo",value:"Negativo"},{label:"Observacion",value:"Observacion"}];const y={code:!1,patient_id:null,creation_date:!1,phase_id:null,target_id:null,start_date:!1,end_date:!1,clinical_team:!1,achievement:!1,strategy:!1,requirement:!1,test:"",status:1},f=e=>e.map((e=>({value:e.id,label:e.name}))),N=(0,o.p5)((0,o.Tg)((e=>{let{id:t,doGet:a,genericException:r,appSuccess:o,doPost:N,doPut:E,appInfo:R,setEditable:C,viewMode:A,refresh:O}=e;const w=(0,m.s0)(),[F,S]=(0,i.useState)(y),[k,I]=(0,i.useState)(!0),L=(0,i.useCallback)((async()=>{const e={url:l.Z.transactions.evaluations.initForm,data:t?{id:t}:{}};return await a(e)}),[a,t,O,C]),M=(0,i.useCallback)((async()=>{try{const{evaluations:e,patient:t,phase:a,target:i}=await L();b=f(t),q=f(a),v=f(i);const{code:s,patient_id:n,creation_date:r,phase_id:d,target_id:l,start_date:c,end_date:o,clinical_team:u,achievement:m,strategy:x,requirement:p,test:h,status:g}=e;S({code:s||"Autom\xe1tico",patient_id:n||null,creation_date:r||"",phase_id:d||null,target_id:l||null,start_date:c||"",end_date:o||"",clinical_team:u||"",achievement:m||"",strategy:x||"",requirement:p||"",test:h||"",status:(0,_.rp)(g)||"Activo"}),I(!1)}catch(e){console.log("ERROR AL INICIAR"+e),r(e)}}),[r,L]);(0,i.useEffect)((()=>{M()}),[M]);const V=e=>{w("".concat("/app/general/transactions/evaluations","/edit/").concat(e),{replace:!1})};return(0,h.jsx)(h.Fragment,{children:k?(0,h.jsx)(x.Z,{p:10,children:(0,h.jsx)(d.aN,{})}):(0,h.jsx)(n.J9,{enableReinitialize:!0,initialValues:F,validationSchema:g,onSubmit:async e=>{const a=(e=>{const{code:t,patient_id:a,creation_date:i,phase_id:s,target_id:n,start_date:r,end_date:d,clinical_team:l,achievement:c,strategy:o,requirement:u,test:m,status:x}=e;return{code:t,patient_id:a,creation_date:i,phase_id:s,target_id:n,start_date:r,end_date:d,clinical_team:l,achievement:c,strategy:o,requirement:u,test:m,status:(0,_.HY)(x)}})(e),i={url:t?"".concat(Z,"/").concat(t):Z,data:a},s=t?E:N;try{const e=await s(i);t?(R(c.Z.crud.update),V(e.response.data.id)):(o(c.Z.crud.new),V(e.response.data.id))}catch(n){console.log("ERROR AL GUARDAR "+n),r(n)}},children:e=>(0,h.jsxs)(n.l0,{children:[(0,h.jsx)(u.Au,{formProps:e}),(0,h.jsxs)(s.ZP,{container:!0,direction:"row",spacing:2,children:[(0,h.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Codigo",name:"code",component:d.dn,disabled:!0,InputProps:{readOnly:!0}})}),(0,h.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Paciente",name:"patient_id",component:d.Ky,items:b})}),(0,h.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Fecha de Creacion",name:"creation_date",component:p.Z})}),(0,h.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Fase",name:"phase_id",component:d.Ky,items:q,onOptionSelected:t=>(async(e,t)=>{try{if(e){const i={url:j,data:{phase_id:e}},s=await a(i);v=f(s.targets),t.setFieldValue("target_id",null)}else v=[],t.setFieldValue("target_id",null)}catch(i){console.log("ERROR AL CARGAR OBJETIVOS "+i),r(i)}})(t,e)})}),(0,h.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Objetivo",name:"target_id",component:d.Ky,items:v})}),(0,h.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Fecha inicio",name:"start_date",component:p.Z})}),(0,h.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Fecha final",name:"end_date",component:p.Z})}),(0,h.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Apreciacion Equipo Clinico",name:"clinical_team",component:d.dn})}),(0,h.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Logros y Dificultades",name:"achievement",component:d.dn})}),(0,h.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Estrategias Utilizadas",name:"strategy",component:d.dn})}),(0,h.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Exigencias",name:"requirement",component:d.dn})}),(0,h.jsx)(s.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Evaluacion",name:"test",component:d.Ky,items:P})}),(0,h.jsx)(s.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Estado",name:"status",component:d.dn,disabled:!0})})]})]})})})})))},82337:(e,t,a)=>{a.d(t,{Z:()=>r});var i=a(33359),s=a(23814);const n=(0,a(59703).Z)("MuiBox",["root"]),r=(0,s.Z)({defaultClassName:n.root,generateClassName:i.Z.generate})}}]);
//# sourceMappingURL=825.bb469904.chunk.js.map