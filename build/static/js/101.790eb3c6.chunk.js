"use strict";(self.webpackChunkoasis_front=self.webpackChunkoasis_front||[]).push([[101],{1847:(e,a,s)=>{s.d(a,{Z:()=>N});var l=s(72791),t=s(61889),n=s(92506),o=s(81724),r=s(87284),i=s(38314),d=s(32325),c=s(96172),m=s(40720),u=s(57689),p=s(82337),b=s(43849),x=s(92983),h=s(80184);const g=o.Ry({document_type:o.Z_().required("Tipo de documento es requerido"),code:o.Z_().required("Numero es requerido"),name:o.Z_().required("Nombres es requerido"),image:o.Z_().required("Imagen es requerido"),gender:o.Z_().required("Genero es requerido"),marital_status:o.Z_().required("Estado Civil es requerido"),date_of_birth:o.Z_().required("Fecha de Nacimiento es requerido"),address1:o.Z_().required("Direccion 1 es requerido"),address2:o.Z_().required("Direccion 2 es requerido"),phone:o.Z_().required("Telefono es requerido"),cellphone:o.Z_().required("Celular es requerido"),email:o.Z_().required("E-Mail es requerido"),job_title:o.Z_().required("Cargo es requerido"),status:o.Z_().required("Estado es requerido")}),_=i.Z.masters.employees.base;let j=[{label:"DNI",value:"DNI"},{label:"RUC",value:"RUC"},{label:"TI",value:"TI"},{label:"CEDULA",value:"CEDULA"}],Z=[{label:"Masculino",value:"Masculino"},{label:"Femenino",value:"Femenino"},{label:"No binario",value:"No binario"},{label:"Prefiero no especificar",value:"Prefiero no especificar"}],f=[{label:"Soltero(a)",value:"Soltero(a)"},{label:"Casado(a)",value:"Casado(a)"},{label:"Union Libre",value:"Union Libre"},{label:"Separado(a)",value:"Separado(a)"},{label:"Divorciado(a)",value:"Divorciado(a)"},{label:"Viudo(a)",value:"Viudo(a)"}];const y={document_type:"",code:!1,name:!1,image:!1,gender:"",marital_status:"",date_of_birth:!1,address1:!1,address2:!1,phone:!1,cellphone:!1,email:!1,job_title:!1,status:1},N=(0,c.p5)((0,c.Tg)((e=>{let{id:a,doGet:s,genericException:o,appSuccess:c,doPost:N,doPut:q,appInfo:v,setEditable:C,viewMode:P,refresh:E}=e;const S=(0,u.s0)(),[R,w]=(0,l.useState)(y),[A,D]=(0,l.useState)(!0),T=(0,l.useCallback)((async()=>{const e={url:i.Z.masters.employees.initForm,data:a?{id:a}:{}};return await s(e)}),[s,a,E,C]),I=(0,l.useCallback)((async()=>{try{const{employees:e}=await T(),{document_type:a,code:s,name:l,image:t,gender:n,marital_status:o,date_of_birth:r,address1:i,address2:d,phone:c,cellphone:m,email:u,job_title:p,status:x}=e;w({document_type:a||"",code:s||"",name:l||"",image:t||"",gender:n||"",marital_status:o||"",date_of_birth:r||"",address1:i||"",address2:d||"",phone:c||"",cellphone:m||"",email:u||"",job_title:p||"",status:(0,b.rp)(x)||"Activo"}),D(!1)}catch(e){console.log("ERROR AL INICIAR"+e),o(e)}}),[o,T]);(0,l.useEffect)((()=>{I()}),[I]);const M=e=>{S("".concat("/app/general/masters/employees","/edit/").concat(e),{replace:!1})};return(0,h.jsx)(h.Fragment,{children:A?(0,h.jsx)(p.Z,{p:10,children:(0,h.jsx)(r.aN,{})}):(0,h.jsx)(n.J9,{enableReinitialize:!0,initialValues:R,validationSchema:g,onSubmit:async e=>{const s=(e=>{const{document_type:a,code:s,name:l,image:t,gender:n,marital_status:o,date_of_birth:r,address1:i,address2:d,phone:c,cellphone:m,email:u,job_title:p,status:x}=e;return{document_type:a,code:s,name:l,image:t,gender:n,marital_status:o,date_of_birth:r,address1:i,address2:d,phone:c,cellphone:m,email:u,job_title:p,status:(0,b.HY)(x)}})(e),l={url:a?"".concat(_,"/").concat(a):_,data:s},t=a?q:N;try{const e=await t(l);a?(v(d.Z.crud.update),M(e.response.data.id)):(c(d.Z.crud.new),M(e.response.data.id))}catch(n){console.log("ERROR AL GUARDAR "+n),o(n)}},children:e=>(0,h.jsxs)(n.l0,{children:[(0,h.jsx)(m.Au,{formProps:e}),(0,h.jsxs)(t.ZP,{container:!0,direction:"row",spacing:2,children:[(0,h.jsx)(t.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Tipo de documento",name:"document_type",component:r.Ky,items:j})}),(0,h.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Numero",name:"code",component:r.dn})}),(0,h.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Nombres",name:"name",component:r.dn})}),(0,h.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Imagen",name:"image",component:r.dn})}),(0,h.jsx)(t.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Genero",name:"gender",component:r.Ky,items:Z})}),(0,h.jsx)(t.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Estado Civil",name:"marital_status",component:r.Ky,items:f})}),(0,h.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Fecha de Nacimiento",name:"date_of_birth",component:x.Z})}),(0,h.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Direccion 1",name:"address1",component:r.dn})}),(0,h.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Direccion 2",name:"address2",component:r.OW})}),(0,h.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Telefono",name:"phone",component:r.dn})}),(0,h.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Celular",name:"cellphone",component:r.dn})}),(0,h.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"E-Mail",name:"email",component:r.dn})}),(0,h.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Cargo",name:"job_title",component:r.dn})}),(0,h.jsx)(t.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,h.jsx)(n.gN,{label:"Estado",name:"status",component:r.dn,disabled:!0})})]})]})})})})))},41101:(e,a,s)=>{s.r(a),s.d(a,{default:()=>y});var l=s(72791),t=s(57689),n=s(87284),o=s(38314),r=s(32325),i=s(96172),d=s(78145),c=s(30808),m=s(1847),u=s(43849),p=s(80184);const{masters:{employees:{title:b,deleteTitle:x,deleteMessage:h,changeStatusTitle:g,changeStatusMessage:_}}}=c.default,j="general:masters:employees:create",Z="general:masters:employees:delete",f="general:masters:employees:changeStatus",y=(0,i.p5)((0,i.Tg)((e=>{const[a,s]=(0,l.useState)(null),[i,c]=(0,l.useState)(null),[y,N]=(0,l.useState)(null),[q,v]=(0,l.useState)(!1),C=(0,l.useRef)(null);(0,l.useEffect)((()=>{q||s(null)}),[q]);const P=[{label:"masters"},{label:b}],E="/app/general/masters/employees",S=(0,t.s0)(),R=()=>c(null),w=e=>(0,p.jsx)(n.Gh,{row:e,onEdit:()=>{return a=e.id,void S("".concat(E,"/edit/").concat(a),{replace:!0,id:a});var a},onChangeStatus:()=>N(e.id)}),A=[{name:"document_type",label:"Tipo de documento"},{name:"image",label:"Imagen"},{name:"code",label:"Numero"},{name:"name",label:"Nombres"},{name:"phone",label:"Telefono"},{name:"cellphone",label:"Celular"},{name:"email",label:"E-Mail"},{name:"job_title",label:"Cargo"},{label:"Estado",filter:!1,component:e=>(0,p.jsx)(n.Fm,{estado:(0,u.rp)(e.status)})},{name:"acciones",width:130,align:"right",label:"Acciones",filter:!1,component:e=>w(e)}];return(0,p.jsxs)(n.cc,{breadcrumbs:P,children:[Boolean(i)&&(0,p.jsx)(d.s,{open:!0,title:x,message:h,onClose:R,onAccept:async()=>{const a="".concat(o.Z.masters.employees.base,"/").concat(i);try{await e.doDelete({url:a}),C.current.refresh(),R(),e.appWarning(r.Z.crud.delete)}catch(s){e.appError(r.Z.crud.fail)}finally{c(null)}},createPermissions:Z}),Boolean(y)&&(0,p.jsx)(d.s,{open:!0,title:g,message:_,onClose:()=>N(null),onAccept:()=>(async()=>{const a="".concat(o.Z.masters.employees.base,"/changestatus/").concat(y);try{await e.doPut({url:a}),e.appWarning(r.Z.crud.changeStatus),C.current.refresh()}catch(s){e.appError(r.Z.crud.fail)}finally{N(null)}})(),createPermissions:f}),q&&(0,p.jsx)(m.Z,{id:a,setOpenModal:v,refreshData:C}),(0,p.jsx)(n.iA,{forwardedRef:C,onCreate:()=>{S("".concat(E,"/new"),{replace:!1})},serverSideUrl:o.Z.masters.employees.base,columns:A,title:b,createPermissions:j})]})})))},82337:(e,a,s)=>{s.d(a,{Z:()=>o});var l=s(33359),t=s(23814);const n=(0,s(59703).Z)("MuiBox",["root"]),o=(0,t.Z)({defaultClassName:n.root,generateClassName:l.Z.generate})}}]);
//# sourceMappingURL=101.790eb3c6.chunk.js.map