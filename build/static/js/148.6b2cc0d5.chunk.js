"use strict";(self.webpackChunkoasis_front=self.webpackChunkoasis_front||[]).push([[148],{40526:(e,t,n)=>{n.d(t,{Z:()=>j});var a=n(72791),o=n(61889),s=n(92506),i=n(81724),l=n(87284),c=n(38314),r=n(32325),d=n(96172),u=n(40720),m=n(57689),p=n(82337),h=n(43849),g=n(92983),x=n(80184);const b=i.Ry({code:i.Z_().required("Codigo es requerido"),patient_id:i.Z_().required("Paciente es requerido"),employee_id:i.Z_().required("Empleado es requerido"),date_of_evolution:i.Z_().required("Fecha de registro es requerido"),area:i.Z_().required("Area que registra evolucion es requerido"),comments:i.Z_().required("Notas es requerido"),status:i.Z_().required("Estado es requerido")}),f=c.Z.transactions.evolutions.base;let _=[],v=[];const y={code:!1,patient_id:null,employee_id:null,date_of_evolution:!1,area:!1,comments:!1,status:1},Z=e=>e.map((e=>({value:e.id,label:e.name}))),j=(0,d.p5)((0,d.Tg)((e=>{let{id:t,doGet:n,genericException:i,appSuccess:d,doPost:j,doPut:E,appInfo:w,setEditable:S,viewMode:P,refresh:R}=e;const A=(0,m.s0)(),[C,q]=(0,a.useState)(y),[N,I]=(0,a.useState)(!0),O=(0,a.useCallback)((async()=>{const e={url:c.Z.transactions.evolutions.initForm,data:t?{id:t}:{}};return await n(e)}),[n,t,R,S]),D=(0,a.useCallback)((async()=>{try{const{evolutions:e,patient:t,employee:n}=await O();_=Z(t),v=Z(n);const{code:a,patient_id:o,employee_id:s,date_of_evolution:i,area:l,comments:c,status:r}=e;q({code:a||"",patient_id:o||null,employee_id:s||null,date_of_evolution:i||"",area:l||"",comments:c||"",status:(0,h.rp)(r)||"Activo"}),I(!1)}catch(e){console.log("ERROR AL INICIAR"+e),i(e)}}),[i,O]);(0,a.useEffect)((()=>{D()}),[D]);const k=e=>{A("".concat("/app/general/transactions/evolutions","/edit/").concat(e),{replace:!1})};return(0,x.jsx)(x.Fragment,{children:N?(0,x.jsx)(p.Z,{p:10,children:(0,x.jsx)(l.aN,{})}):(0,x.jsx)(s.J9,{enableReinitialize:!0,initialValues:C,validationSchema:b,onSubmit:async e=>{const n=(e=>{const{code:t,patient_id:n,employee_id:a,date_of_evolution:o,area:s,comments:i,status:l}=e;return{code:t,patient_id:n,employee_id:a,date_of_evolution:o,area:s,comments:i,status:(0,h.HY)(l)}})(e),a={url:t?"".concat(f,"/").concat(t):f,data:n},o=t?E:j;try{const e=await o(a);t?(w(r.Z.crud.update),k(e.response.data.id)):(d(r.Z.crud.new),k(e.response.data.id))}catch(s){console.log("ERROR AL GUARDAR "+s),i(s)}},children:e=>(0,x.jsxs)(s.l0,{children:[(0,x.jsx)(u.Au,{formProps:e}),(0,x.jsxs)(o.ZP,{container:!0,direction:"row",spacing:2,children:[(0,x.jsx)(o.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,x.jsx)(s.gN,{label:"Codigo",name:"code",component:l.dn})}),(0,x.jsx)(o.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,x.jsx)(s.gN,{label:"Paciente",name:"patient_id",component:l.Ky,items:_})}),(0,x.jsx)(o.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,x.jsx)(s.gN,{label:"Empleado",name:"employee_id",component:l.Ky,items:v})}),(0,x.jsx)(o.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,x.jsx)(s.gN,{label:"Fecha de registro",name:"date_of_evolution",component:g.Z})}),(0,x.jsx)(o.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,x.jsx)(s.gN,{label:"Area que registra evolucion",name:"area",component:l.dn})}),(0,x.jsx)(o.ZP,{item:!0,xs:12,md:12,xl:12,children:(0,x.jsx)(s.gN,{label:"Notas",name:"comments",component:l.OW})}),(0,x.jsx)(o.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,x.jsx)(s.gN,{label:"Estado",name:"status",component:l.dn,disabled:!0})})]})]})})})})))},82242:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var a=n(72791),o=n(57689),s=n(87284),i=n(38314),l=n(32325),c=n(96172),r=n(78145),d=n(30808),u=n(40526),m=n(43849),p=n(93044);const h=n.p+"static/media/logo.e36b31c002e290a07eaa.png";var g=n(80184);const{transactions:{evolutions:{title:x,deleteTitle:b,deleteMessage:f,changeStatusTitle:_,changeStatusMessage:v}}}=d.default,y="general:transactions:evolutions:create",Z="general:transactions:evolutions:delete",j="general:transactions:evolutions:changeStatus",E=(0,c.p5)((0,c.Tg)((e=>{const[t,n]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[E,w]=(0,a.useState)(null),[S,P]=(0,a.useState)(!1),[R,A]=(0,a.useState)(null),C=(0,a.useRef)(null);(0,a.useEffect)((()=>{S||n(null)}),[S]);const q=[{label:"transactions"},{label:x}],N="/app/general/transactions/evolutions",I=(0,o.s0)(),O=()=>d(null),D=e=>(0,g.jsx)(s.Gh,{row:e,onEdit:()=>{return t=e.id,void I("".concat(N,"/edit/").concat(t),{replace:!0,id:t});var t},onChangeStatus:()=>w(e.id),onPrint:F}),k=(0,a.useCallback)((async t=>{try{const n={url:"".concat(i.Z.transactions.evolutions.report,"/").concat(t),data:{}};return await e.doGet(n)}catch(n){console.log("ERROR AL INICIAR "+n),e.genericException(n)}}),[e.genericException]),F=async function(){let{patient_id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{evolution:t}=await k(e);A(t)};(0,a.useEffect)((()=>{if(R){const e=(e=>{const t=new Date;return"".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"),"-").concat(String(t.getDate()).padStart(2,"0")),'\n<!DOCTYPE html>\n<html lang="es">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Reporte de Evoluci\xf3n de Usuario</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            margin: 20px;\n        }\n        table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-top: 20px;\n        }\n        th, td {\n            border: 1px solid #000;\n            padding: 8px;\n            text-align: left;\n            vertical-align: top;\n        }\n        th {\n            background-color: #f2f2f2;\n        }\n        h1 {\n            text-align: center;\n            font-size: 18px;\n            margin-bottom: 10px;\n        }\n        .logo {\n            text-align: left;\n        }\n        .logo img {\n            width: 50px;\n        }\n    </style>\n</head>\n<body>\n    \x3c!-- Encabezado --\x3e\n    <div class="logo">\n        <img src="'.concat(h,'" alt="Logo Corporaci\xf3n OASIS" />\n    </div>\n    <h1>REPORTE DE EVOLUCI\xd3N DE USUARIO <br> IPS CORPORACI\xd3N OASIS</h1>\n\n    \x3c!-- Tabla Din\xe1mica --\x3e\n    <table>\n        <thead>\n            <tr>\n                <th>ID Paciente</th>\n                <th>Paciente</th>\n                <th>Fecha/Hora</th>\n                <th>Nota</th>\n                <th>\xc1rea</th>\n                <th>Empleado</th>\n            </tr>\n        </thead>\n        <tbody>\n           <tbody>\n              ').concat(e.map(((e,t)=>"\n                <tr>\n                    <td>".concat(e.patient_code,"</td>\n                    <td>").concat(e.patient_name,"</td>\n                    <td>").concat(e.date_of_evolution,"</td>\n                    <td>").concat(e.comments,"</td>\n                    <td>").concat(e.area,"</td>\n                    <td>").concat(e.employee_name,"</td>\n                </tr>\n              "))).join(""),"\n            </tbody>\n        </tbody>\n    </table>\n</body>\n</html>\n\n            \n          \n    ")})(R),t="toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=800,height=600",n=window.open("","_blank",t);n.document.write(e),n.document.close(),n.print()}}),[R]);const T=[{name:"image",label:"Imagen",component:e=>(0,g.jsx)(p.Z,{alt:e.name,src:e.image,style:{width:"50px",height:"50px"}})},{name:"patient_name",label:"Paciente"},{name:"date_of_evolution",label:"Fecha de registro"},{name:"area",label:"Area que registra evolucion"},{name:"employee_name",label:"Empleado"},{label:"Estado",filter:!1,component:e=>(0,g.jsx)(s.Fm,{estado:(0,m.rp)(e.status)})},{name:"acciones",width:130,align:"right",label:"Acciones",filter:!1,component:e=>D(e)}];return(0,g.jsxs)(s.cc,{breadcrumbs:q,children:[Boolean(c)&&(0,g.jsx)(r.s,{open:!0,title:b,message:f,onClose:O,onAccept:async()=>{const t="".concat(i.Z.transactions.evolutions.base,"/").concat(c);try{await e.doDelete({url:t}),C.current.refresh(),O(),e.appWarning(l.Z.crud.delete)}catch(n){e.appError(l.Z.crud.fail)}finally{d(null)}},createPermissions:Z}),Boolean(E)&&(0,g.jsx)(r.s,{open:!0,title:_,message:v,onClose:()=>w(null),onAccept:()=>(async()=>{const t="".concat(i.Z.transactions.evolutions.base,"/changestatus/").concat(E);try{await e.doPut({url:t}),e.appWarning(l.Z.crud.changeStatus),C.current.refresh()}catch(n){e.appError(l.Z.crud.fail)}finally{w(null)}})(),createPermissions:j}),S&&(0,g.jsx)(u.Z,{id:t,setOpenModal:P,refreshData:C}),(0,g.jsx)(s.iA,{forwardedRef:C,onCreate:()=>{I("".concat(N,"/new"),{replace:!1})},serverSideUrl:i.Z.transactions.evolutions.base,columns:T,title:x,createPermissions:y})]})})))},82337:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(33359),o=n(23814);const s=(0,n(59703).Z)("MuiBox",["root"]),i=(0,o.Z)({defaultClassName:s.root,generateClassName:a.Z.generate})}}]);
//# sourceMappingURL=148.6b2cc0d5.chunk.js.map