"use strict";(self.webpackChunkoasis_front=self.webpackChunkoasis_front||[]).push([[928],{24568:(e,s,a)=>{a.d(s,{Z:()=>Z});var t=a(72791),n=a(61889),r=a(92506),o=a(81724),c=a(87284),l=a(38314),i=a(32325),d=a(96172),u=a(40720),p=a(57689),m=a(82337),h=a(43849),g=a(80184);const f=o.Ry({code:o.Z_().required("Codigo es requerido"),name:o.Z_().required("Nombre fase es requerido"),status:o.Z_().required("Estado es requerido")}),x=l.Z.masters.phases.base,b={code:!1,name:!1,status:1},Z=(0,d.p5)((0,d.Tg)((e=>{let{id:s,doGet:a,genericException:o,appSuccess:d,doPost:Z,doPut:j,appInfo:S,setEditable:w,viewMode:C,refresh:y}=e;const R=(0,p.s0)(),[A,E]=(0,t.useState)(b),[P,N]=(0,t.useState)(!0),v=(0,t.useCallback)((async()=>{const e={url:l.Z.masters.phases.initForm,data:s?{id:s}:{}};return await a(e)}),[a,s,y,w]),k=(0,t.useCallback)((async()=>{try{const{phases:e}=await v(),{code:s,name:a,status:t}=e;E({code:s||"Autom\xe1tico",name:a||"",status:(0,h.rp)(t)||"Activo"}),N(!1)}catch(e){console.log("ERROR AL INICIAR"+e),o(e)}}),[o,v]);(0,t.useEffect)((()=>{k()}),[k]);const q=e=>{R("".concat("/app/general/masters/phases","/edit/").concat(e),{replace:!1})};return(0,g.jsx)(g.Fragment,{children:P?(0,g.jsx)(m.Z,{p:10,children:(0,g.jsx)(c.aN,{})}):(0,g.jsx)(r.J9,{enableReinitialize:!0,initialValues:A,validationSchema:f,onSubmit:async e=>{const a=(e=>{const{code:s,name:a,status:t}=e;return{code:s,name:a,status:(0,h.HY)(t)}})(e),t={url:s?"".concat(x,"/").concat(s):x,data:a},n=s?j:Z;try{const e=await n(t);s?(S(i.Z.crud.update),q(e.response.data.id)):(d(i.Z.crud.new),q(e.response.data.id))}catch(r){console.log("ERROR AL GUARDAR "+r),o(r)}},children:e=>(0,g.jsxs)(r.l0,{children:[(0,g.jsx)(u.Au,{formProps:e}),(0,g.jsxs)(n.ZP,{container:!0,direction:"row",spacing:2,children:[(0,g.jsx)(n.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(r.gN,{label:"Codigo",name:"code",component:c.dn,disabled:!0,InputProps:{readOnly:!0}})}),(0,g.jsx)(n.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(r.gN,{label:"Nombre fase",name:"name",component:c.dn})}),(0,g.jsx)(n.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(r.gN,{label:"Estado",name:"status",component:c.dn,disabled:!0})})]})]})})})})))},95928:(e,s,a)=>{a.r(s),a.d(s,{default:()=>w});var t=a(72791),n=a(57689),r=a(87284),o=a(38314),c=a(32325),l=a(96172),i=a(78145),d=a(30808),u=a(24568),p=a(43849),m=a(80184);const{masters:{phases:{title:h,deleteTitle:g,deleteMessage:f,changeStatusTitle:x,changeStatusMessage:b}}}=d.default,Z="general:masters:phases:create",j="general:masters:phases:delete",S="general:masters:phases:changeStatus",w=(0,l.p5)((0,l.Tg)((e=>{const[s,a]=(0,t.useState)(null),[l,d]=(0,t.useState)(null),[w,C]=(0,t.useState)(null),[y,R]=(0,t.useState)(!1),A=(0,t.useRef)(null);(0,t.useEffect)((()=>{y||a(null)}),[y]);const E=[{label:"masters"},{label:h}],P="/app/general/masters/phases",N=(0,n.s0)(),v=()=>d(null),k=e=>(0,m.jsx)(r.Gh,{row:e,onEdit:()=>{return s=e.id,void N("".concat(P,"/edit/").concat(s),{replace:!0,id:s});var s},onChangeStatus:()=>C(e.id)}),q=[{name:"code",label:"Codigo"},{name:"name",label:"Nombre fase"},{label:"Estado",filter:!1,component:e=>(0,m.jsx)(r.Fm,{estado:(0,p.rp)(e.status)})},{name:"acciones",width:130,align:"right",label:"Acciones",filter:!1,component:e=>k(e)}];return(0,m.jsxs)(r.cc,{breadcrumbs:E,children:[Boolean(l)&&(0,m.jsx)(i.s,{open:!0,title:g,message:f,onClose:v,onAccept:async()=>{const s="".concat(o.Z.masters.phases.base,"/").concat(l);try{await e.doDelete({url:s}),A.current.refresh(),v(),e.appWarning(c.Z.crud.delete)}catch(a){e.appError(c.Z.crud.fail)}finally{d(null)}},createPermissions:j}),Boolean(w)&&(0,m.jsx)(i.s,{open:!0,title:x,message:b,onClose:()=>C(null),onAccept:()=>(async()=>{const s="".concat(o.Z.masters.phases.base,"/changestatus/").concat(w);try{await e.doPut({url:s}),e.appWarning(c.Z.crud.changeStatus),A.current.refresh()}catch(a){e.appError(c.Z.crud.fail)}finally{C(null)}})(),createPermissions:S}),y&&(0,m.jsx)(u.Z,{id:s,setOpenModal:R,refreshData:A}),(0,m.jsx)(r.iA,{forwardedRef:A,onCreate:()=>{N("".concat(P,"/new"),{replace:!1})},serverSideUrl:o.Z.masters.phases.base,columns:q,title:h,createPermissions:Z})]})})))},82337:(e,s,a)=>{a.d(s,{Z:()=>o});var t=a(33359),n=a(23814);const r=(0,a(59703).Z)("MuiBox",["root"]),o=(0,n.Z)({defaultClassName:r.root,generateClassName:t.Z.generate})}}]);
//# sourceMappingURL=928.ba5114bd.chunk.js.map