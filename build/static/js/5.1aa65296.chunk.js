"use strict";(self.webpackChunkoasis_front=self.webpackChunkoasis_front||[]).push([[5],{84005:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var s=a(72791),o=a(96172),n=a(87284),i=a(30808),d=a(57689),r=(a(85698),a(61889)),l=a(57621),c=a(40526),u=a(80184);const{title:m,updateTitle:p}=i.default.transactions.evolutions,x=[{label:"Maestros"},{label:m}];const _=(0,o.p5)((0,o.Tg)((function(){const{id:e}=(0,d.UO)(),[t,a]=(0,s.useState)(!1),[o,i]=(0,s.useState)(!1),m=(0,s.useRef)();return(0,u.jsx)(n.cc,{title:p,breadcrumbs:x,withOutCard:!0,children:(0,u.jsx)(r.ZP,{container:!0,spacing:2,sx:{pb:2,minHeight:250},children:(0,u.jsx)(r.ZP,{item:!0,xs:12,md:12,children:(0,u.jsx)(l.Z,{sx:{p:3,minHeight:"100%"},children:(0,u.jsx)(c.Z,{id:e,refresh:m,setEditable:a,setViewMode:i,viewMode:o})})})})})})))},40526:(e,t,a)=>{a.d(t,{Z:()=>q});var s=a(72791),o=a(61889),n=a(92506),i=a(81724),d=a(87284),r=a(38314),l=a(32325),c=a(96172),u=a(40720),m=a(57689),p=a(82337),x=a(43849),_=a(92983),Z=a(80184);const h=i.Ry({code:i.Z_().required("Codigo es requerido"),patient_id:i.Z_().required("Paciente es requerido"),employee_id:i.Z_().required("Empleado es requerido"),date_of_evolution:i.Z_().required("Fecha de registro es requerido"),area:i.Z_().required("Area que registra evolucion es requerido"),comments:i.Z_().required("Notas es requerido"),status:i.Z_().required("Estado es requerido")}),g=r.Z.transactions.evolutions.base;let j=[],b=[];const f={code:!1,patient_id:null,employee_id:null,date_of_evolution:!1,area:!1,comments:!1,status:1},v=e=>e.map((e=>({value:e.id,label:e.name}))),q=(0,c.p5)((0,c.Tg)((e=>{let{id:t,doGet:a,genericException:i,appSuccess:c,doPost:q,doPut:y,appInfo:P,setEditable:N,viewMode:R,refresh:w}=e;const C=(0,m.s0)(),[E,A]=(0,s.useState)(f),[S,k]=(0,s.useState)(!0),M=(0,s.useCallback)((async()=>{const e={url:r.Z.transactions.evolutions.initForm,data:t?{id:t}:{}};return await a(e)}),[a,t,w,N]),O=(0,s.useCallback)((async()=>{try{const{evolutions:e,patient:t,employee:a}=await M();j=v(t),b=v(a);const{code:s,patient_id:o,employee_id:n,date_of_evolution:i,area:d,comments:r,status:l}=e;A({code:s||"",patient_id:o||null,employee_id:n||null,date_of_evolution:i||"",area:d||"",comments:r||"",status:(0,x.rp)(l)||"Activo"}),k(!1)}catch(e){console.log("ERROR AL INICIAR"+e),i(e)}}),[i,M]);(0,s.useEffect)((()=>{O()}),[O]);const F=e=>{C("".concat("/app/general/transactions/evolutions","/edit/").concat(e),{replace:!1})};return(0,Z.jsx)(Z.Fragment,{children:S?(0,Z.jsx)(p.Z,{p:10,children:(0,Z.jsx)(d.aN,{})}):(0,Z.jsx)(n.J9,{enableReinitialize:!0,initialValues:E,validationSchema:h,onSubmit:async e=>{const a=(e=>{const{code:t,patient_id:a,employee_id:s,date_of_evolution:o,area:n,comments:i,status:d}=e;return{code:t,patient_id:a,employee_id:s,date_of_evolution:o,area:n,comments:i,status:(0,x.HY)(d)}})(e),s={url:t?"".concat(g,"/").concat(t):g,data:a},o=t?y:q;try{const e=await o(s);t?(P(l.Z.crud.update),F(e.response.data.id)):(c(l.Z.crud.new),F(e.response.data.id))}catch(n){console.log("ERROR AL GUARDAR "+n),i(n)}},children:e=>(0,Z.jsxs)(n.l0,{children:[(0,Z.jsx)(u.Au,{formProps:e}),(0,Z.jsxs)(o.ZP,{container:!0,direction:"row",spacing:2,children:[(0,Z.jsx)(o.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,Z.jsx)(n.gN,{label:"Codigo",name:"code",component:d.dn})}),(0,Z.jsx)(o.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,Z.jsx)(n.gN,{label:"Paciente",name:"patient_id",component:d.Ky,items:j})}),(0,Z.jsx)(o.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,Z.jsx)(n.gN,{label:"Empleado",name:"employee_id",component:d.Ky,items:b})}),(0,Z.jsx)(o.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,Z.jsx)(n.gN,{label:"Fecha de registro",name:"date_of_evolution",component:_.Z})}),(0,Z.jsx)(o.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,Z.jsx)(n.gN,{label:"Area que registra evolucion",name:"area",component:d.dn})}),(0,Z.jsx)(o.ZP,{item:!0,xs:12,md:12,xl:12,children:(0,Z.jsx)(n.gN,{label:"Notas",name:"comments",component:d.OW})}),(0,Z.jsx)(o.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,Z.jsx)(n.gN,{label:"Estado",name:"status",component:d.dn,disabled:!0})})]})]})})})})))},82337:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(33359),o=a(23814);const n=(0,a(59703).Z)("MuiBox",["root"]),i=(0,o.Z)({defaultClassName:n.root,generateClassName:s.Z.generate})}}]);
//# sourceMappingURL=5.1aa65296.chunk.js.map