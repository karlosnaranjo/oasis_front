"use strict";(self.webpackChunkoasis_front=self.webpackChunkoasis_front||[]).push([[908],{46232:(e,t,a)=>{a.d(t,{Z:()=>N});var i=a(72791),s=a(61889),n=a(92506),r=a(81724),d=a(87284),l=a(38314),o=a(32325),c=a(96172),u=a(40720),m=a(57689),_=a(82337),x=a(43849),p=a(92983),g=a(80184);const h=r.Ry({code:r.Z_().required("Codigo es requerido"),patient_id:r.Z_().required("Paciente es requerido"),creation_date:r.Z_().required("Fecha de Creacion es requerido"),phase_id:r.Z_().required("Fase es requerido"),target_id:r.Z_().required("Objetivo es requerido"),start_date:r.Z_().required("Fecha inicio es requerido"),end_date:r.Z_().required("Fecha final es requerido"),clinical_team:r.Z_().required("Apreciacion Equipo Clinico es requerido"),achievement:r.Z_().required("Logros y Dificultades es requerido"),strategy:r.Z_().required("Estrategias Utilizadas es requerido"),requirement:r.Z_().required("Exigencias es requerido"),test:r.Z_().required("Evaluaci\xf3n es requerido"),status:r.Z_().required("Estado es requerido")}),Z=l.Z.transactions.evaluations.base,b="".concat(Z,"/targets-by-phase");let j=[],q=[],v=[],y=[{label:"Positivo",value:"Positivo"},{label:"Negativo",value:"Negativo"},{label:"Observacion",value:"Observacion"}];const P={code:!1,patient_id:null,creation_date:!1,phase_id:null,target_id:null,start_date:!1,end_date:!1,clinical_team:!1,achievement:!1,strategy:!1,requirement:!1,test:"",status:1},f=e=>e.map((e=>({value:e.id,label:e.name}))),N=(0,c.p5)((0,c.Tg)((e=>{let{id:t,doGet:a,genericException:r,appSuccess:c,doPost:N,doPut:E,appInfo:R,setEditable:w,viewMode:O,refresh:C}=e;const A=(0,m.s0)(),[F,S]=(0,i.useState)(P),[k,I]=(0,i.useState)(!0),L=(0,i.useCallback)((async()=>{const e={url:l.Z.transactions.evaluations.initForm,data:t?{id:t}:{}};return await a(e)}),[a,t,C,w]),M=(0,i.useCallback)((async()=>{try{const{evaluations:e,patient:t,phase:a,target:i}=await L();j=f(t),q=f(a),v=f(i);const{code:s,patient_id:n,creation_date:r,phase_id:d,target_id:l,start_date:o,end_date:c,clinical_team:u,achievement:m,strategy:_,requirement:p,test:g,status:h}=e;S({code:s||"Autom\xe1tico",patient_id:n||null,creation_date:r||"",phase_id:d||null,target_id:l||null,start_date:o||"",end_date:c||"",clinical_team:u||"",achievement:m||"",strategy:_||"",requirement:p||"",test:g||"",status:(0,x.rp)(h)||"Activo"}),I(!1)}catch(e){console.log("ERROR AL INICIAR"+e),r(e)}}),[r,L]);(0,i.useEffect)((()=>{M()}),[M]);const V=e=>{A("".concat("/app/general/transactions/evaluations","/edit/").concat(e),{replace:!1})};return(0,g.jsx)(g.Fragment,{children:k?(0,g.jsx)(_.Z,{p:10,children:(0,g.jsx)(d.aN,{})}):(0,g.jsx)(n.J9,{enableReinitialize:!0,initialValues:F,validationSchema:h,onSubmit:async e=>{const a=(e=>{const{code:t,patient_id:a,creation_date:i,phase_id:s,target_id:n,start_date:r,end_date:d,clinical_team:l,achievement:o,strategy:c,requirement:u,test:m,status:_}=e;return{code:t,patient_id:a,creation_date:i,phase_id:s,target_id:n,start_date:r,end_date:d,clinical_team:l,achievement:o,strategy:c,requirement:u,test:m,status:(0,x.HY)(_)}})(e),i={url:t?"".concat(Z,"/").concat(t):Z,data:a},s=t?E:N;try{const e=await s(i);t?(R(o.Z.crud.update),V(e.response.data.id)):(c(o.Z.crud.new),V(e.response.data.id))}catch(n){console.log("ERROR AL GUARDAR "+n),r(n)}},children:e=>(0,g.jsxs)(n.l0,{children:[(0,g.jsx)(u.Au,{formProps:e}),(0,g.jsxs)(s.ZP,{container:!0,direction:"row",spacing:2,children:[(0,g.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(n.gN,{label:"Codigo",name:"code",component:d.dn,disabled:!0,InputProps:{readOnly:!0}})}),(0,g.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(n.gN,{label:"Paciente",name:"patient_id",component:d.Ky,items:j})}),(0,g.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(n.gN,{label:"Fecha de Creacion",name:"creation_date",component:p.Z})}),(0,g.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(n.gN,{label:"Fase",name:"phase_id",component:d.Ky,items:q,onOptionSelected:t=>(async(e,t)=>{try{if(e){const i={url:b,data:{phase_id:e}},s=await a(i);v=f(s.targets),t.setFieldValue("target_id",null)}else v=[],t.setFieldValue("target_id",null)}catch(i){console.log("ERROR AL CARGAR OBJETIVOS "+i),r(i)}})(t,e)})}),(0,g.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(n.gN,{label:"Objetivo",name:"target_id",component:d.Ky,items:v})}),(0,g.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(n.gN,{label:"Fecha inicio",name:"start_date",component:p.Z})}),(0,g.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(n.gN,{label:"Fecha final",name:"end_date",component:p.Z})}),(0,g.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:12,children:(0,g.jsx)(n.gN,{label:"Apreciaci\xf3n Equipo Clin\xedco",name:"clinical_team",component:d.OW,rows:8})}),(0,g.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:12,children:(0,g.jsx)(n.gN,{label:"Logros y Dificultades",name:"achievement",component:d.OW,rows:8})}),(0,g.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:12,children:(0,g.jsx)(n.gN,{label:"Estrategias Utilizadas",name:"strategy",component:d.OW,rows:8})}),(0,g.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:12,children:(0,g.jsx)(n.gN,{label:"Exigencias",name:"requirement",component:d.OW,rows:8})}),(0,g.jsx)(s.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(n.gN,{label:"Evaluacion",name:"test",component:d.Ky,items:y})}),(0,g.jsx)(s.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(n.gN,{label:"Estado",name:"status",component:d.dn,disabled:!0})})]})]})})})})))},95689:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var i=a(72791),s=a(87284),n=a(30808),r=a(46232),d=a(80184);const{title:l,createTitle:o}=n.default.transactions.evaluations,c=[{label:"Maestros"},{label:l}];const u=function(){const[e,t]=(0,i.useState)(!1),[a,n]=(0,i.useState)(!1),l=(0,i.useRef)();return(0,d.jsx)(s.cc,{title:o,breadcrumbs:c,children:(0,d.jsx)(r.Z,{refresh:l,setEditable:t,setViewMode:n,viewMode:a})})}},82337:(e,t,a)=>{a.d(t,{Z:()=>r});var i=a(33359),s=a(23814);const n=(0,a(59703).Z)("MuiBox",["root"]),r=(0,s.Z)({defaultClassName:n.root,generateClassName:i.Z.generate})}}]);
//# sourceMappingURL=908.24132da5.chunk.js.map