"use strict";(self.webpackChunkoasis_front=self.webpackChunkoasis_front||[]).push([[305],{52305:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var a=t(72791),n=t(96172),i=t(87284),r=t(30808),d=t(57689),o=(t(85698),t(61889)),c=t(57621),l=t(21498),u=t(80184);const{title:m,updateTitle:p}=r.default.masters.targets,x=[{label:"Maestros"},{label:m}];const h=(0,n.p5)((0,n.Tg)((function(){const{id:e}=(0,d.UO)(),[s,t]=(0,a.useState)(!1),[n,r]=(0,a.useState)(!1),m=(0,a.useRef)();return(0,u.jsx)(i.cc,{title:p,breadcrumbs:x,withOutCard:!0,children:(0,u.jsx)(o.ZP,{container:!0,spacing:2,sx:{pb:2,minHeight:250},children:(0,u.jsx)(o.ZP,{item:!0,xs:12,md:12,children:(0,u.jsx)(c.Z,{sx:{p:3,minHeight:"100%"},children:(0,u.jsx)(l.Z,{id:e,refresh:m,setEditable:t,setViewMode:r,viewMode:n})})})})})})))},21498:(e,s,t)=>{t.d(s,{Z:()=>f});var a=t(72791),n=t(61889),i=t(92506),r=t(81724),d=t(87284),o=t(38314),c=t(32325),l=t(96172),u=t(40720),m=t(57689),p=t(82337),x=t(43849),h=t(80184);const g=r.Ry({code:r.Z_().required("Codigo es requerido"),name:r.Z_().required("Nombre fase es requerido"),phase_id:r.Z_().required("Fase es requerido"),status:r.Z_().required("Estado es requerido")}),Z=o.Z.masters.targets.base;let b=[];const j={code:!1,name:!1,phase_id:null,status:1},f=(0,l.p5)((0,l.Tg)((e=>{let{id:s,doGet:t,genericException:r,appSuccess:l,doPost:f,doPut:_,appInfo:R,setEditable:w,viewMode:C,refresh:N}=e;const P=(0,m.s0)(),[q,v]=(0,a.useState)(j),[E,y]=(0,a.useState)(!0),A=(0,a.useCallback)((async()=>{const e={url:o.Z.masters.targets.initForm,data:s?{id:s}:{}};return await t(e)}),[t,s,N,w]),S=(0,a.useCallback)((async()=>{try{const{targets:e,phase:s}=await A();b=s.map((e=>({value:e.id,label:e.name})));const{code:t,name:a,phase_id:n,status:i}=e;v({code:t||"",name:a||"",phase_id:n||null,status:(0,x.rp)(i)||"Activo"}),y(!1)}catch(e){console.log("ERROR AL INICIAR"+e),r(e)}}),[r,A]);(0,a.useEffect)((()=>{S()}),[S]);const k=e=>{P("".concat("/app/general/masters/targets","/edit/").concat(e),{replace:!1})};return(0,h.jsx)(h.Fragment,{children:E?(0,h.jsx)(p.Z,{p:10,children:(0,h.jsx)(d.aN,{})}):(0,h.jsx)(i.J9,{enableReinitialize:!0,initialValues:q,validationSchema:g,onSubmit:async e=>{const t=(e=>{const{code:s,name:t,phase_id:a,status:n}=e;return{code:s,name:t,phase_id:a,status:(0,x.HY)(n)}})(e),a={url:s?"".concat(Z,"/").concat(s):Z,data:t},n=s?_:f;try{const e=await n(a);s?(R(c.Z.crud.update),k(e.response.data.id)):(l(c.Z.crud.new),k(e.response.data.id))}catch(i){console.log("ERROR AL GUARDAR "+i),r(i)}},children:e=>(0,h.jsxs)(i.l0,{children:[(0,h.jsx)(u.Au,{formProps:e}),(0,h.jsxs)(n.ZP,{container:!0,direction:"row",spacing:2,children:[(0,h.jsx)(n.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(i.gN,{label:"Codigo",name:"code",component:d.dn})}),(0,h.jsx)(n.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(i.gN,{label:"Nombre fase",name:"name",component:d.dn})}),(0,h.jsx)(n.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(i.gN,{label:"Fase",name:"phase_id",component:d.Ky,items:b})}),(0,h.jsx)(n.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,h.jsx)(i.gN,{label:"Estado",name:"status",component:d.dn,disabled:!0})})]})]})})})})))},82337:(e,s,t)=>{t.d(s,{Z:()=>r});var a=t(33359),n=t(23814);const i=(0,t(59703).Z)("MuiBox",["root"]),r=(0,n.Z)({defaultClassName:i.root,generateClassName:a.Z.generate})}}]);
//# sourceMappingURL=305.5a164d40.chunk.js.map