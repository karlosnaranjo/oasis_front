"use strict";(self.webpackChunkoasis_front=self.webpackChunkoasis_front||[]).push([[145],{99938:(e,a,n)=>{n.d(a,{Z:()=>b});var o=n(763),i=n(62711),d=n(18267),s=n(40642),t=n(66934),r=n(43616),l=n(35527),c=n(16029),u=n(20890),m=n(7870),_=n(80184);const p=(0,t.ZP)("div")((e=>{let{theme:a}=e;return{width:144,height:144,margin:"auto",borderRadius:"50%",padding:a.spacing(1),border:"1px dashed ".concat(a.palette.grey[50032])}})),x=(0,t.ZP)("div")({zIndex:0,width:"100%",height:"100%",outline:"none",display:"flex",overflow:"hidden",borderRadius:"50%",position:"relative",alignItems:"center",justifyContent:"center","& > *":{width:"100%",height:"100%"},"&:hover":{cursor:"pointer","& .placeholder":{zIndex:9}}}),h=(0,t.ZP)("div")((e=>{let{theme:a}=e;return{display:"flex",position:"absolute",alignItems:"center",flexDirection:"column",justifyContent:"center",color:a.palette.text.secondary,backgroundColor:a.palette.background.neutral,transition:a.transitions.create("opacity",{easing:a.transitions.easing.easeInOut,duration:a.transitions.duration.shorter}),"&:hover":{opacity:.72}}}));function b(e){let{error:a,file:n,caption:t,sx:b,...g}=e;const{getRootProps:j,getInputProps:Z,isDragActive:v,isDragReject:q,fileRejections:f}=(0,d.uI)({multiple:!1,...g}),P=()=>(0,_.jsx)(l.Z,{variant:"outlined",sx:{py:1,px:2,my:2,borderColor:"error.light",bgcolor:e=>(0,r.Fq)(e.palette.error.main,.08)},children:f.map((e=>{let{file:a,errors:n}=e;const{path:o,size:i}=a;return(0,_.jsxs)(c.Z,{sx:{my:1},children:[(0,_.jsxs)(u.Z,{variant:"subtitle2",noWrap:!0,children:[o," - ",(0,m.oe)(i)]}),n.map((e=>(0,_.jsxs)(u.Z,{variant:"caption",component:"p",children:["- ",e.message]},e.code)))]},o)}))});return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p,{sx:b,children:(0,_.jsxs)(x,{...j(),sx:{...v&&{opacity:.72},...(q||a)&&{color:"error.main",borderColor:"error.light",bgcolor:"error.lighter"}},children:[(0,_.jsx)("input",{...Z()}),n&&(0,_.jsx)(c.Z,{component:"img",alt:"avatar",src:(0,o.isString)(n)?n:n.preview,sx:{zIndex:8,objectFit:"cover"}}),(0,_.jsxs)(h,{className:"placeholder",sx:{...n&&{opacity:0,color:"common.white",bgcolor:"grey.900","&:hover":{opacity:.72}}},children:[(0,_.jsx)(c.Z,{component:i.JO,icon:s.Z,sx:{width:24,height:24,mb:1}}),(0,_.jsx)(u.Z,{variant:"caption",children:n?"Update photo":"Upload photo"})]})]})}),t,f.length>0&&(0,_.jsx)(P,{})]})}},61145:(e,a,n)=>{n.d(a,{Z:()=>I});var o=n(72791),i=n(61889),d=n(92506),s=n(81724),t=n(87284),r=n(20890),l=n(38314),c=n(32325),u=n(96172),m=n(40720),_=n(57689),p=n(82337),x=n(43849),h=n(92983),b=n(99938),g=n(80184);const j=s.Ry({document_type:s.Z_().required("Tipo de documento es requerido"),code:s.Z_().required("Numero es requerido"),name:s.Z_().required("Nombres es requerido"),image:s.Z_().required("Imagen es requerido"),gender:s.Z_().required("Genero es requerido"),marital_status:s.Z_().required("Estado Civil es requerido"),date_of_birth:s.Z_().required("Fecha de Nacimiento es requerido"),address1:s.Z_().required("Direccion 1 es requerido"),address2:s.Z_().required("Direccion 2 es requerido"),phone:s.Z_().required("Telefono es requerido"),cellphone:s.Z_().required("Celular es requerido"),email:s.Z_().required("E-Mail es requerido"),job_title:s.Z_().required("Ocupacion es requerido"),health_insurance:s.Z_().required("EPS es requerido"),level_of_education:s.Z_().required("Escolaridad es requerido"),admission_date:s.Z_().required("Fecha de Ingreso es requerido"),second_date:s.Z_().required("Fecha de Ingreso (por segunda vez) es requerido"),third_date:s.Z_().required("Fecha de Ingreso (por tercera vez) es requerido"),responsible_adult:s.Z_().required("Acudiente es requerido"),responsible_adult_code:s.Z_().required("Documento del acudiente es requerido"),relationship:s.Z_().required("Parentesco es requerido"),responsible_adult_phone:s.Z_().required("Telefono es requerido"),responsible_adult_cellphone:s.Z_().required("Celular es requerido"),drug_id:s.Z_().required("Droga de impacto es requerido"),orientation:s.Z_().required("Ubicacion (Tiempo - Espacio - Persona) es requerido"),body_language:s.Z_().required("Lenguaje corporal es requerido"),ideation:s.Z_().required("Ideacion o intento suicida es requerido"),delusions:s.Z_().required("Delirios es requerido"),hallucinations:s.Z_().required("Alucinaciones es requerido"),eating_problems:s.Z_().required("Problemas de alimentacion es requerido"),treatment_motivations:s.Z_().required("Motivacion al tratamiento es requerido"),end_date:s.Z_().required("Fecha de Salida es requerido"),cause_of_end:s.Z_().required("Causa de salida es requerido"),end_date_second:s.Z_().required("Fecha de Salida (Por segunda vez) es requerido"),cause_of_end_second:s.Z_().required("Causa de salida (Por segunda vez) es requerido"),end_date_third:s.Z_().required("Fecha de Salida (Por tercera vez) es requerido"),cause_of_end_third:s.Z_().required("Causa de salida (Por tercera vez) es requerido"),comments:s.Z_().required("Observaciones es requerido"),employee_id:s.Z_().required("Funcionario es requerido"),status:s.Z_().required("Estado es requerido")}),Z=l.Z.masters.patients.base;let v=[{label:"DNI",value:"DNI"},{label:"RUC",value:"RUC"},{label:"TI",value:"TI"},{label:"CEDULA",value:"CEDULA"}],q=[{label:"Masculino",value:"Masculino"},{label:"Femenino",value:"Femenino"},{label:"No binario",value:"No binario"},{label:"Prefiero no especificar",value:"Prefiero no especificar"}],f=[{label:"Soltero(a)",value:"Soltero(a)"},{label:"Casado(a)",value:"Casado(a)"},{label:"Union Libre",value:"Union Libre"},{label:"Separado(a)",value:"Separado(a)"},{label:"Divorciado(a)",value:"Divorciado(a)"},{label:"Viudo(a)",value:"Viudo(a)"}],P=[],N=[{label:"Egreso",value:"Egreso"},{label:"Abandono",value:"Abandono"},{label:"Fuga",value:"Fuga"},{label:"Remision",value:"Remision"},{label:"Expulsion",value:"Expulsion"}],y=[{label:"Egreso",value:"Egreso"},{label:"Abandono",value:"Abandono"},{label:"Fuga",value:"Fuga"},{label:"Remision",value:"Remision"},{label:"Expulsion",value:"Expulsion"}],F=[{label:"Egreso",value:"Egreso"},{label:"Abandono",value:"Abandono"},{label:"Fuga",value:"Fuga"},{label:"Remision",value:"Remision"},{label:"Expulsion",value:"Expulsion"}],C=[];const E={document_type:"",code:!1,name:!1,image:null,gender:"",marital_status:"",date_of_birth:!1,address1:!1,address2:!1,phone:!1,cellphone:!1,email:!1,job_title:!1,health_insurance:!1,level_of_education:!1,admission_date:!1,second_date:!1,third_date:!1,responsible_adult:!1,responsible_adult_code:!1,relationship:!1,responsible_adult_phone:!1,responsible_adult_cellphone:!1,drug_id:null,orientation:!1,body_language:!1,ideation:!1,delusions:!1,hallucinations:!1,eating_problems:!1,treatment_motivations:!1,end_date:!1,cause_of_end:"",end_date_second:!1,cause_of_end_second:"",end_date_third:!1,cause_of_end_third:"",comments:!1,employee_id:null,status:1},R=e=>e.map((e=>({value:e.id,label:e.name}))),I=(0,u.p5)((0,u.Tg)((e=>{let{id:a,doGet:n,genericException:s,appSuccess:u,doPost:I,doPut:D,doPostFormData:A,appInfo:w,setEditable:S,viewMode:z,refresh:U}=e;const T=(0,_.s0)(),[L,K]=(0,o.useState)(E),[O,k]=(0,o.useState)(!0),[M,G]=(0,o.useState)(null),V=(0,o.useCallback)((async()=>{const e={url:l.Z.masters.patients.initForm,data:a?{id:a}:{}};return await n(e)}),[n,a,U,S]),J=(0,o.useCallback)((async()=>{try{const{patients:e,drug:a,employee:n}=await V();P=R(a),C=R(n);const{document_type:o,code:i,name:d,image:s,gender:t,marital_status:r,date_of_birth:l,address1:c,address2:u,phone:m,cellphone:_,email:p,job_title:h,health_insurance:b,level_of_education:g,admission_date:j,second_date:Z,third_date:v,responsible_adult:q,responsible_adult_code:f,relationship:N,responsible_adult_phone:y,responsible_adult_cellphone:F,drug_id:E,orientation:I,body_language:D,ideation:A,delusions:w,hallucinations:S,eating_problems:z,treatment_motivations:U,end_date:T,cause_of_end:L,end_date_second:O,cause_of_end_second:M,end_date_third:G,cause_of_end_third:J,comments:$,employee_id:B,status:H}=e;K({document_type:o||"",code:i||"",name:d||"",image:s||"",gender:t||"",marital_status:r||"",date_of_birth:l||"",address1:c||"",address2:u||"",phone:m||"",cellphone:_||"",email:p||"",job_title:h||"",health_insurance:b||"",level_of_education:g||"",admission_date:j||"",second_date:Z||"",third_date:v||"",responsible_adult:q||"",responsible_adult_code:f||"",relationship:N||"",responsible_adult_phone:y||"",responsible_adult_cellphone:F||"",drug_id:E||null,orientation:I||"",body_language:D||"",ideation:A||"",delusions:w||"",hallucinations:S||"",eating_problems:z||"",treatment_motivations:U||"",end_date:T||"",cause_of_end:L||"",end_date_second:O||"",cause_of_end_second:M||"",end_date_third:G||"",cause_of_end_third:J||"",comments:$||"",employee_id:B||null,status:(0,x.rp)(H)||"Activo"}),k(!1)}catch(e){console.log("ERROR AL INICIAR"+e),s(e)}}),[s,V]);(0,o.useEffect)((()=>{J()}),[J]);const $=e=>{T("".concat("/app/general/masters/patients","/edit/").concat(e),{replace:!1})};return(0,g.jsx)(g.Fragment,{children:O?(0,g.jsx)(p.Z,{p:10,children:(0,g.jsx)(t.aN,{})}):(0,g.jsx)(d.J9,{enableReinitialize:!0,initialValues:L,validationSchema:j,onSubmit:async e=>{const n=(e=>{const{document_type:a,code:n,name:o,image:i,gender:d,marital_status:s,date_of_birth:t,address1:r,address2:l,phone:c,cellphone:u,email:m,job_title:_,health_insurance:p,level_of_education:h,admission_date:b,second_date:g,third_date:j,responsible_adult:Z,responsible_adult_code:v,relationship:q,responsible_adult_phone:f,responsible_adult_cellphone:P,drug_id:N,orientation:y,body_language:F,ideation:C,delusions:E,hallucinations:R,eating_problems:I,treatment_motivations:D,end_date:A,cause_of_end:w,end_date_second:S,cause_of_end_second:z,end_date_third:U,cause_of_end_third:T,comments:L,employee_id:K,status:O}=e;return{document_type:a,code:n,name:o,image:i,gender:d,marital_status:s,date_of_birth:t,address1:r,address2:l,phone:c,cellphone:u,email:m,job_title:_,health_insurance:p,level_of_education:h,admission_date:b,second_date:g,third_date:j,responsible_adult:Z,responsible_adult_code:v,relationship:q,responsible_adult_phone:f,responsible_adult_cellphone:P,drug_id:N,orientation:y,body_language:F,ideation:C,delusions:E,hallucinations:R,eating_problems:I,treatment_motivations:D,end_date:A,cause_of_end:w,end_date_second:S,cause_of_end_second:z,end_date_third:U,cause_of_end_third:T,comments:L,employee_id:K,status:(0,x.HY)(O)}})(e),o=new FormData;var i;o.append("image",n.image),o.append("avatar",await(i=n.image,new Promise(((e,a)=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.onerror=a,n.readAsDataURL(i)}))));for(const a in n)n.hasOwnProperty(a)&&o.append(a,n[a]);const d={url:"".concat(Z,"/").concat(a),data:o};try{const e=await A(d);a?(w(c.Z.crud.update),$(e.response.data.id)):(u(c.Z.crud.new),$(e.response.data.id))}catch(t){console.log("ERROR AL GUARDAR "+t),s(t)}},children:e=>(0,g.jsxs)(d.l0,{children:[(0,g.jsx)(m.Au,{formProps:e}),(0,g.jsxs)(i.ZP,{container:!0,direction:"row",spacing:2,children:[(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(b.Z,{file:M||(L.image?"".concat(L.image):null),onDrop:e=>{const a=e[0];if(a){const e=new FileReader;e.onloadend=()=>{G(e.result),K((e=>({...e,image:a})))},e.readAsDataURL(a)}},accept:"image/*",caption:(0,g.jsx)(r.Z,{variant:"caption",children:"Cargue la foto del paciente"})})}),(0,g.jsx)(i.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Tipo de documento",name:"document_type",component:t.Ky,items:v})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Numero",name:"code",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Nombres",name:"name",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Genero",name:"gender",component:t.Ky,items:q})}),(0,g.jsx)(i.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Estado Civil",name:"marital_status",component:t.Ky,items:f})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Fecha de Nacimiento",name:"date_of_birth",component:h.Z})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Direccion 1",name:"address1",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Direccion 2",name:"address2",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Telefono",name:"phone",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Celular",name:"cellphone",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"E-Mail",name:"email",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Ocupacion",name:"job_title",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"EPS",name:"health_insurance",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Escolaridad",name:"level_of_education",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Fecha de Ingreso",name:"admission_date",component:h.Z})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Fecha de Ingreso (por segunda vez)",name:"second_date",component:h.Z})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Fecha de Ingreso (por tercera vez)",name:"third_date",component:h.Z})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Acudiente",name:"responsible_adult",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Documento del acudiente",name:"responsible_adult_code",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Parentesco",name:"relationship",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Telefono",name:"responsible_adult_phone",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Celular",name:"responsible_adult_cellphone",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Droga de impacto",name:"drug_id",component:t.Ky,items:P})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Ubicacion (Tiempo - Espacio - Persona)",name:"orientation",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Lenguaje corporal",name:"body_language",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Ideacion o intento suicida",name:"ideation",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Delirios",name:"delusions",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Alucinaciones",name:"hallucinations",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Problemas de alimentacion",name:"eating_problems",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Motivacion al tratamiento",name:"treatment_motivations",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Fecha de Salida",name:"end_date",component:h.Z})}),(0,g.jsx)(i.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Causa de salida",name:"cause_of_end",component:t.Ky,items:N})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Fecha de Salida (Por segunda vez)",name:"end_date_second",component:h.Z})}),(0,g.jsx)(i.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Causa de salida (Por segunda vez)",name:"cause_of_end_second",component:t.Ky,items:y})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Fecha de Salida (Por tercera vez)",name:"end_date_third",component:h.Z})}),(0,g.jsx)(i.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Causa de salida (Por tercera vez)",name:"cause_of_end_third",component:t.Ky,items:F})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Observaciones",name:"comments",component:t.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Funcionario",name:"employee_id",component:t.Ky,items:C})}),(0,g.jsx)(i.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(d.gN,{label:"Estado",name:"status",component:t.dn,disabled:!0})})]})]})})})})))},7870:(e,a,n)=>{n.d(a,{FK:()=>t,e_:()=>d,f2:()=>s,oe:()=>r});n(763);var o=n(26098),i=n.n(o);function d(e){return i()(e).format(Number.isInteger(e)?"$0,0":"$0,0.00")}function s(e){return i()(e/100).format("0.0%")}function t(e){return i()(e).format()}function r(e){return i()(e).format("0.0 b")}},82337:(e,a,n)=>{n.d(a,{Z:()=>s});var o=n(33359),i=n(23814);const d=(0,n(59703).Z)("MuiBox",["root"]),s=(0,i.Z)({defaultClassName:d.root,generateClassName:o.Z.generate})}}]);
//# sourceMappingURL=145.0ac67da8.chunk.js.map