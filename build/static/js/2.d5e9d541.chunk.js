"use strict";(self.webpackChunkoasis_front=self.webpackChunkoasis_front||[]).push([[2],{13002:(e,s,t)=>{t.r(s),t.d(s,{default:()=>O});var a=t(72791),n=t(96172),r=t(87284),o=t(30808),i=t(57689),c=t(85698),l=t(61889),d=t(57621),u=t(24568),m=t(78145),x=t(38314),p=t(32325),h=t(5574),g=t(65661),b=t(39157),j=t(92506),f=t(81724),Z=t(82337),R=t(43849),w=t(80184);const C=f.Ry({code:f.Z_().required("Codigo es requerido"),name:f.Z_().required("Nombre fase es requerido"),status:f.Z_().required("Estado es requerido")}),P=x.Z.masters.targets.base,y={code:!1,name:!1,status:1},E=(0,n.p5)((0,n.Tg)((e=>{let{id:s,phase_id:t,doGet:n,genericException:o,appSuccess:i,doPost:c,doPut:d,appInfo:u,setEditable:m,viewMode:f,setOpenModal:E,refreshData:N,refreshTable:S}=e;const[v,A]=(0,a.useState)(y),[q,_]=(0,a.useState)(!0),O=(0,a.useCallback)((async()=>{const e={url:x.Z.masters.targets.initForm,data:s?{id:s}:{}};return await n(e)}),[n,s,m]),k=(0,a.useCallback)((async()=>{try{const{targets:e}=await O(),{code:s,name:t,status:a}=e;A({code:s||"",name:t||"",status:(0,R.rp)(a)||"Activo"}),_(!1)}catch(e){console.log("ERROR AL INICIAR"+e),o(e)}}),[o,O]);(0,a.useEffect)((()=>{k()}),[k]);return(0,w.jsxs)(h.Z,{fullWidth:!0,maxWidth:"xl",open:!0,onClose:()=>E(!1),"aria-labelledby":"max-width-dialog-title",children:[(0,w.jsx)(g.Z,{id:"max-width-dialog-title",children:"Objetivos"}),(0,w.jsx)(b.Z,{children:q?(0,w.jsx)(Z.Z,{p:10,children:(0,w.jsx)(r.aN,{})}):(0,w.jsx)(j.J9,{enableReinitialize:!0,initialValues:v,validationSchema:C,onSubmit:async e=>{const a=s?d:c,n=(e=>{const{code:s,name:a,status:n}=e;return{phase_id:t,code:s,name:a,status:(0,R.HY)(n)}})(e),r={url:"".concat(P).concat(s?"/".concat(s):""),data:n};try{await a(r);s?u(p.Z.crud.update):i(p.Z.crud.new),S()}catch(l){console.log("ERROR AL GUARDAR "+l),o(l)}finally{E(!1),N.current.refresh()}},children:e=>(0,w.jsxs)(j.l0,{children:[(0,w.jsxs)(l.ZP,{container:!0,direction:"row",spacing:2,children:[(0,w.jsx)(l.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,w.jsx)(j.gN,{label:"Codigo",name:"code",component:r.dn})}),(0,w.jsx)(l.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,w.jsx)(j.gN,{label:"Nombre fase",name:"name",component:r.dn})}),(0,w.jsx)(l.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,w.jsx)(j.gN,{label:"Estado",name:"status",component:r.dn,disabled:!0})})]}),(0,w.jsx)(l.ZP,{container:!0,direction:"row",style:{paddingTop:30},justify:"flex-end",children:(0,w.jsxs)(l.ZP,{item:!0,children:[(0,w.jsx)(r.Dv,{}),(0,w.jsx)(r.Xd,{onClick:()=>E(!1),label:"Cancelar",style:{marginLeft:15}})]})})]})})})]})}))),N="general:masters:targets:create",S="general:masters:targets:delete",v=(0,n.p5)((0,n.Tg)((e=>{let{id:s,doDelete:t,appWarning:n,genericException:i,editable:c}=e;const[l,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(null),g=s;console.log(g);const[b,j]=(0,a.useState)(!1),f=(0,a.useRef)(null),Z=()=>d(null),C=()=>f.current.refresh(),P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;j(!0),h(e)},y=e=>{const{id:s}=e;return(0,w.jsx)(r.Gh,{onEdit:()=>P(s),onDelete:()=>d(s),row:e})},{deleteTitle:v,deleteMessage:A}=o.default.masters.targets,q=[{name:"code",label:"Codigo"},{name:"name",label:"Nombre fase"},{label:"Estado",filter:!1,component:e=>(0,w.jsx)(r.Fm,{estado:(0,R.rp)(e.status)})},{name:"acciones",label:"Acciones",filter:!1,component:e=>y(e)}];return(0,w.jsxs)(w.Fragment,{children:[Boolean(l)&&(0,w.jsx)(m.s,{open:!0,title:v,message:A,onClose:Z,onAccept:async()=>{const e={url:"".concat(x.Z.masters.targets.base,"/").concat(l)};try{await t(e),C(),Z(),n(p.Z.crud.delete)}catch(s){i(s)}},createPermissions:S}),Boolean(b)&&(0,w.jsx)(E,{id:u,phase_id:g,setOpenModal:()=>{j(!1),h(null)},refreshTable:C,editable:c}),(0,w.jsx)(r.iA,{forwardedRef:f,serverSideUrl:x.Z.masters.targets.base,serverSideData:{where:"phase_id=".concat(g)},onCreate:P,columns:q,createPermissions:N})]})}))),{title:A,updateTitle:q}=o.default.masters.phases,_=[{label:"Maestros"},{label:A}];const O=(0,n.p5)((0,n.Tg)((function(){const{id:e}=(0,i.UO)(),[s,t]=(0,a.useState)(!1),[n,o]=(0,a.useState)(!1),m=(0,a.useRef)(),x=[{label:"Objetivos",component:(0,w.jsx)(v,{id:e,refreshParent:()=>m.current.refresh(),editable:!s})}];return(0,w.jsxs)(r.cc,{title:q,breadcrumbs:_,withOutCard:!0,children:[(0,w.jsx)(l.ZP,{container:!0,spacing:2,sx:{pb:2,minHeight:250},children:(0,w.jsx)(l.ZP,{item:!0,xs:12,md:12,children:(0,w.jsx)(d.Z,{sx:{p:3,minHeight:"100%"},children:(0,w.jsx)(u.Z,{id:e,refresh:m,setEditable:t,setViewMode:o,viewMode:n})})})}),(0,w.jsx)(d.Z,{sx:{pl:2,pr:2},children:(0,w.jsx)(c.Z,{config:x})})]})})))},24568:(e,s,t)=>{t.d(s,{Z:()=>f});var a=t(72791),n=t(61889),r=t(92506),o=t(81724),i=t(87284),c=t(38314),l=t(32325),d=t(96172),u=t(40720),m=t(57689),x=t(82337),p=t(43849),h=t(80184);const g=o.Ry({code:o.Z_().required("Codigo es requerido"),name:o.Z_().required("Nombre fase es requerido"),status:o.Z_().required("Estado es requerido")}),b=c.Z.masters.phases.base,j={code:!1,name:!1,status:1},f=(0,d.p5)((0,d.Tg)((e=>{let{id:s,doGet:t,genericException:o,appSuccess:d,doPost:f,doPut:Z,appInfo:R,setEditable:w,viewMode:C,refresh:P}=e;const y=(0,m.s0)(),[E,N]=(0,a.useState)(j),[S,v]=(0,a.useState)(!0),A=(0,a.useCallback)((async()=>{const e={url:c.Z.masters.phases.initForm,data:s?{id:s}:{}};return await t(e)}),[t,s,P,w]),q=(0,a.useCallback)((async()=>{try{const{phases:e}=await A(),{code:s,name:t,status:a}=e;N({code:s||"",name:t||"",status:(0,p.rp)(a)||"Activo"}),v(!1)}catch(e){console.log("ERROR AL INICIAR"+e),o(e)}}),[o,A]);(0,a.useEffect)((()=>{q()}),[q]);const _=e=>{y("".concat("/app/general/masters/phases","/edit/").concat(e),{replace:!1})};return(0,h.jsx)(h.Fragment,{children:S?(0,h.jsx)(x.Z,{p:10,children:(0,h.jsx)(i.aN,{})}):(0,h.jsx)(r.J9,{enableReinitialize:!0,initialValues:E,validationSchema:g,onSubmit:async e=>{const t=(e=>{const{code:s,name:t,status:a}=e;return{code:s,name:t,status:(0,p.HY)(a)}})(e),a={url:s?"".concat(b,"/").concat(s):b,data:t},n=s?Z:f;try{const e=await n(a);s?(R(l.Z.crud.update),_(e.response.data.id)):(d(l.Z.crud.new),_(e.response.data.id))}catch(r){console.log("ERROR AL GUARDAR "+r),o(r)}},children:e=>(0,h.jsxs)(r.l0,{children:[(0,h.jsx)(u.Au,{formProps:e}),(0,h.jsxs)(n.ZP,{container:!0,direction:"row",spacing:2,children:[(0,h.jsx)(n.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(r.gN,{label:"Codigo",name:"code",component:i.dn})}),(0,h.jsx)(n.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(r.gN,{label:"Nombre fase",name:"name",component:i.dn})}),(0,h.jsx)(n.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,h.jsx)(r.gN,{label:"Estado",name:"status",component:i.dn,disabled:!0})})]})]})})})})))},82337:(e,s,t)=>{t.d(s,{Z:()=>o});var a=t(33359),n=t(23814);const r=(0,t(59703).Z)("MuiBox",["root"]),o=(0,n.Z)({defaultClassName:r.root,generateClassName:a.Z.generate})}}]);
//# sourceMappingURL=2.d5e9d541.chunk.js.map