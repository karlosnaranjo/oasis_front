"use strict";(self.webpackChunkoasis_front=self.webpackChunkoasis_front||[]).push([[818],{92502:(e,a,s)=>{s.d(a,{Z:()=>f});var t=s(72791),n=s(61889),r=s(92506),c=s(81724),o=s(87284),l=s(38314),i=s(32325),d=s(96172),u=s(40720),m=s(57689),g=s(82337),p=s(43849),h=s(80184);const x=c.Ry({code:c.Z_().required("Codigo es requerido"),name:c.Z_().required("Nombre es requerido"),technical_name:c.Z_().required("Nombre tecnico es requerido"),status:c.Z_().required("Estado es requerido")}),b=l.Z.masters.drugs.base,Z={code:!1,name:!1,technical_name:!1,status:1},f=(0,d.p5)((0,d.Tg)((e=>{let{id:a,doGet:s,genericException:c,appSuccess:d,doPost:f,doPut:j,appInfo:S,setEditable:w,viewMode:C,refresh:N}=e;const _=(0,m.s0)(),[R,y]=(0,t.useState)(Z),[E,P]=(0,t.useState)(!0),A=(0,t.useCallback)((async()=>{const e={url:l.Z.masters.drugs.initForm,data:a?{id:a}:{}};return await s(e)}),[s,a,N,w]),v=(0,t.useCallback)((async()=>{try{const{drugs:e}=await A(),{code:a,name:s,technical_name:t,status:n}=e;y({code:a||"",name:s||"",technical_name:t||"",status:(0,p.rp)(n)||"Activo"}),P(!1)}catch(e){console.log("ERROR AL INICIAR"+e),c(e)}}),[c,A]);(0,t.useEffect)((()=>{v()}),[v]);const q=e=>{_("".concat("/app/general/masters/drugs","/edit/").concat(e),{replace:!1})};return(0,h.jsx)(h.Fragment,{children:E?(0,h.jsx)(g.Z,{p:10,children:(0,h.jsx)(o.aN,{})}):(0,h.jsx)(r.J9,{enableReinitialize:!0,initialValues:R,validationSchema:x,onSubmit:async e=>{const s=(e=>{const{code:a,name:s,technical_name:t,status:n}=e;return{code:a,name:s,technical_name:t,status:(0,p.HY)(n)}})(e),t={url:a?"".concat(b,"/").concat(a):b,data:s},n=a?j:f;try{const e=await n(t);a?(S(i.Z.crud.update),q(e.response.data.id)):(d(i.Z.crud.new),q(e.response.data.id))}catch(r){console.log("ERROR AL GUARDAR "+r),c(r)}},children:e=>(0,h.jsxs)(r.l0,{children:[(0,h.jsx)(u.Au,{formProps:e}),(0,h.jsxs)(n.ZP,{container:!0,direction:"row",spacing:2,children:[(0,h.jsx)(n.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(r.gN,{label:"Codigo",name:"code",component:o.dn})}),(0,h.jsx)(n.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(r.gN,{label:"Nombre",name:"name",component:o.dn})}),(0,h.jsx)(n.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,h.jsx)(r.gN,{label:"Nombre tecnico",name:"technical_name",component:o.dn})}),(0,h.jsx)(n.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,h.jsx)(r.gN,{label:"Estado",name:"status",component:o.dn,disabled:!0})})]})]})})})})))},15818:(e,a,s)=>{s.r(a),s.d(a,{default:()=>w});var t=s(72791),n=s(57689),r=s(87284),c=s(38314),o=s(32325),l=s(96172),i=s(78145),d=s(30808),u=s(92502),m=s(43849),g=s(80184);const{masters:{drugs:{title:p,deleteTitle:h,deleteMessage:x,changeStatusTitle:b,changeStatusMessage:Z}}}=d.default,f="general:masters:drugs:create",j="general:masters:drugs:delete",S="general:masters:drugs:changeStatus",w=(0,l.p5)((0,l.Tg)((e=>{const[a,s]=(0,t.useState)(null),[l,d]=(0,t.useState)(null),[w,C]=(0,t.useState)(null),[N,_]=(0,t.useState)(!1),R=(0,t.useRef)(null);(0,t.useEffect)((()=>{N||s(null)}),[N]);const y=[{label:"masters"},{label:p}],E="/app/general/masters/drugs",P=(0,n.s0)(),A=()=>d(null),v=e=>(0,g.jsx)(r.Gh,{row:e,onEdit:()=>{return a=e.id,void P("".concat(E,"/edit/").concat(a),{replace:!0,id:a});var a},onChangeStatus:()=>C(e.id)}),q=[{name:"code",label:"Codigo"},{name:"name",label:"Nombre"},{name:"technical_name",label:"Nombre tecnico"},{label:"Estado",filter:!1,component:e=>(0,g.jsx)(r.Fm,{estado:(0,m.rp)(e.status)})},{name:"acciones",width:130,align:"right",label:"Acciones",filter:!1,component:e=>v(e)}];return(0,g.jsxs)(r.cc,{breadcrumbs:y,children:[Boolean(l)&&(0,g.jsx)(i.s,{open:!0,title:h,message:x,onClose:A,onAccept:async()=>{const a="".concat(c.Z.masters.drugs.base,"/").concat(l);try{await e.doDelete({url:a}),R.current.refresh(),A(),e.appWarning(o.Z.crud.delete)}catch(s){e.appError(o.Z.crud.fail)}finally{d(null)}},createPermissions:j}),Boolean(w)&&(0,g.jsx)(i.s,{open:!0,title:b,message:Z,onClose:()=>C(null),onAccept:()=>(async()=>{const a="".concat(c.Z.masters.drugs.base,"/changestatus/").concat(w);try{await e.doPut({url:a}),e.appWarning(o.Z.crud.changeStatus),R.current.refresh()}catch(s){e.appError(o.Z.crud.fail)}finally{C(null)}})(),createPermissions:S}),N&&(0,g.jsx)(u.Z,{id:a,setOpenModal:_,refreshData:R}),(0,g.jsx)(r.iA,{forwardedRef:R,onCreate:()=>{P("".concat(E,"/new"),{replace:!1})},serverSideUrl:c.Z.masters.drugs.base,columns:q,title:p,createPermissions:f})]})})))},82337:(e,a,s)=>{s.d(a,{Z:()=>c});var t=s(33359),n=s(23814);const r=(0,s(59703).Z)("MuiBox",["root"]),c=(0,n.Z)({defaultClassName:r.root,generateClassName:t.Z.generate})}}]);
//# sourceMappingURL=818.c8ed23b8.chunk.js.map