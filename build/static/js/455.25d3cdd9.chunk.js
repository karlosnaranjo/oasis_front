"use strict";(self.webpackChunkoasis_front=self.webpackChunkoasis_front||[]).push([[455],{40526:(e,t,o)=>{o.d(t,{Z:()=>y});var a=o(72791),s=o(61889),n=o(92506),i=o(81724),r=o(87284),d=o(38314),l=o(32325),c=o(96172),u=o(40720),m=o(57689),p=o(82337),x=o(43849),_=o(92983),Z=o(80184);const b=i.Ry({code:i.Z_().required("Codigo es requerido"),patient_id:i.Z_().required("Paciente es requerido"),employee_id:i.Z_().required("Empleado es requerido"),date_of_evolution:i.Z_().required("Fecha de registro es requerido"),area:i.Z_().required("Area que registra evolucion es requerido"),comments:i.Z_().required("Notas es requerido"),status:i.Z_().required("Estado es requerido")}),h=d.Z.transactions.evolutions.base;let j=[],f=[];const g={code:!1,patient_id:null,employee_id:null,date_of_evolution:!1,area:!1,comments:!1,status:1},v=e=>e.map((e=>({value:e.id,label:e.name}))),y=(0,c.p5)((0,c.Tg)((e=>{let{id:t,doGet:o,genericException:i,appSuccess:c,doPost:y,doPut:q,appInfo:P,setEditable:N,viewMode:R,refresh:w}=e;const E=(0,m.s0)(),[A,C]=(0,a.useState)(g),[S,k]=(0,a.useState)(!0),I=(0,a.useCallback)((async()=>{const e={url:d.Z.transactions.evolutions.initForm,data:t?{id:t}:{}};return await o(e)}),[o,t,w,N]),M=(0,a.useCallback)((async()=>{try{const{evolutions:e,patient:t,employee:o}=await I();j=v(t),f=v(o);const{code:a,patient_id:s,employee_id:n,date_of_evolution:i,area:r,comments:d,status:l}=e;C({code:a||"Autom\xe1tico",patient_id:s||null,employee_id:n||null,date_of_evolution:i||"",area:r||"",comments:d||"",status:(0,x.rp)(l)||"Activo"}),k(!1)}catch(e){console.log("ERROR AL INICIAR"+e),i(e)}}),[i,I]);(0,a.useEffect)((()=>{M()}),[M]);const F=e=>{E("".concat("/app/general/transactions/evolutions","/edit/").concat(e),{replace:!1})};return(0,Z.jsx)(Z.Fragment,{children:S?(0,Z.jsx)(p.Z,{p:10,children:(0,Z.jsx)(r.aN,{})}):(0,Z.jsx)(n.J9,{enableReinitialize:!0,initialValues:A,validationSchema:b,onSubmit:async e=>{const o=(e=>{const{code:t,patient_id:o,employee_id:a,date_of_evolution:s,area:n,comments:i,status:r}=e;return{code:t,patient_id:o,employee_id:a,date_of_evolution:s,area:n,comments:i,status:(0,x.HY)(r)}})(e),a={url:t?"".concat(h,"/").concat(t):h,data:o},s=t?q:y;try{const e=await s(a);t?(P(l.Z.crud.update),F(e.response.data.id)):(c(l.Z.crud.new),F(e.response.data.id))}catch(n){console.log("ERROR AL GUARDAR "+n),i(n)}},children:e=>(0,Z.jsxs)(n.l0,{children:[(0,Z.jsx)(u.Au,{formProps:e}),(0,Z.jsxs)(s.ZP,{container:!0,direction:"row",spacing:2,children:[(0,Z.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,Z.jsx)(n.gN,{label:"Codigo",name:"code",component:r.dn,disabled:!0,InputProps:{readOnly:!0}})}),(0,Z.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,Z.jsx)(n.gN,{label:"Paciente",name:"patient_id",component:r.Ky,items:j})}),(0,Z.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,Z.jsx)(n.gN,{label:"Empleado",name:"employee_id",component:r.Ky,items:f})}),(0,Z.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,Z.jsx)(n.gN,{label:"Fecha de registro",name:"date_of_evolution",component:_.Z})}),(0,Z.jsx)(s.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,Z.jsx)(n.gN,{label:"\xc1rea que registra evoluci\xf3n",name:"area",component:r.dn})}),(0,Z.jsx)(s.ZP,{item:!0,xs:12,md:12,xl:12,children:(0,Z.jsx)(n.gN,{label:"Notas",name:"comments",component:r.OW,rows:8})}),(0,Z.jsx)(s.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,Z.jsx)(n.gN,{label:"Estado",name:"status",component:r.dn,disabled:!0})})]})]})})})})))},78455:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var a=o(72791),s=o(87284),n=o(30808),i=o(40526),r=o(80184);const{title:d,createTitle:l}=n.default.transactions.evolutions,c=[{label:"Maestros"},{label:d}];const u=function(){const[e,t]=(0,a.useState)(!1),[o,n]=(0,a.useState)(!1),d=(0,a.useRef)();return(0,r.jsx)(s.cc,{title:l,breadcrumbs:c,children:(0,r.jsx)(i.Z,{refresh:d,setEditable:t,setViewMode:n,viewMode:o})})}},82337:(e,t,o)=>{o.d(t,{Z:()=>i});var a=o(33359),s=o(23814);const n=(0,o(59703).Z)("MuiBox",["root"]),i=(0,s.Z)({defaultClassName:n.root,generateClassName:a.Z.generate})}}]);
//# sourceMappingURL=455.25d3cdd9.chunk.js.map