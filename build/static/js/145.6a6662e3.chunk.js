"use strict";(self.webpackChunkoasis_front=self.webpackChunkoasis_front||[]).push([[145],{99938:(e,n,a)=>{a.d(n,{Z:()=>b});var o=a(763),i=a(62711),t=a(18267),s=a(40642),l=a(66934),d=a(43616),r=a(35527),c=a(16029),m=a(20890),u=a(7870),_=a(80184);const p=(0,l.ZP)("div")((e=>{let{theme:n}=e;return{width:144,height:144,margin:"auto",borderRadius:"50%",padding:n.spacing(1),border:"1px dashed ".concat(n.palette.grey[50032])}})),x=(0,l.ZP)("div")({zIndex:0,width:"100%",height:"100%",outline:"none",display:"flex",overflow:"hidden",borderRadius:"50%",position:"relative",alignItems:"center",justifyContent:"center","& > *":{width:"100%",height:"100%"},"&:hover":{cursor:"pointer","& .placeholder":{zIndex:9}}}),h=(0,l.ZP)("div")((e=>{let{theme:n}=e;return{display:"flex",position:"absolute",alignItems:"center",flexDirection:"column",justifyContent:"center",color:n.palette.text.secondary,backgroundColor:n.palette.background.neutral,transition:n.transitions.create("opacity",{easing:n.transitions.easing.easeInOut,duration:n.transitions.duration.shorter}),"&:hover":{opacity:.72}}}));function b(e){let{error:n,file:a,caption:l,sx:b,...g}=e;const{getRootProps:j,getInputProps:Z,isDragActive:v,isDragReject:f,fileRejections:q}=(0,t.uI)({multiple:!1,...g}),P=()=>(0,_.jsx)(r.Z,{variant:"outlined",sx:{py:1,px:2,my:2,borderColor:"error.light",bgcolor:e=>(0,d.Fq)(e.palette.error.main,.08)},children:q.map((e=>{let{file:n,errors:a}=e;const{path:o,size:i}=n;return(0,_.jsxs)(c.Z,{sx:{my:1},children:[(0,_.jsxs)(m.Z,{variant:"subtitle2",noWrap:!0,children:[o," - ",(0,u.oe)(i)]}),a.map((e=>(0,_.jsxs)(m.Z,{variant:"caption",component:"p",children:["- ",e.message]},e.code)))]},o)}))});return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p,{sx:b,children:(0,_.jsxs)(x,{...j(),sx:{...v&&{opacity:.72},...(f||n)&&{color:"error.main",borderColor:"error.light",bgcolor:"error.lighter"}},children:[(0,_.jsx)("input",{...Z()}),a&&(0,_.jsx)(c.Z,{component:"img",alt:"avatar",src:(0,o.isString)(a)?a:a.preview,sx:{zIndex:8,objectFit:"cover"}}),(0,_.jsxs)(h,{className:"placeholder",sx:{...a&&{opacity:0,color:"common.white",bgcolor:"grey.900","&:hover":{opacity:.72}}},children:[(0,_.jsx)(c.Z,{component:i.JO,icon:s.Z,sx:{width:24,height:24,mb:1}}),(0,_.jsx)(m.Z,{variant:"caption",children:a?"Update photo":"Upload photo"})]})]})}),l,q.length>0&&(0,_.jsx)(P,{})]})}},61145:(e,n,a)=>{a.d(n,{Z:()=>I});var o=a(72791),i=a(61889),t=a(92506),s=a(81724),l=a(87284),d=a(20890),r=a(38314),c=a(32325),m=a(96172),u=a(40720),_=a(57689),p=a(82337),x=a(43849),h=a(92983),b=a(99938),g=a(80184);const j=s.Ry({document_type:s.Z_().required("Tipo de documento es requerido"),code:s.Z_().required("Numero es requerido"),name:s.Z_().required("Nombres es requerido"),image:s.Z_().required("Imagen es requerido"),gender:s.Z_().required("Genero es requerido"),marital_status:s.Z_().required("Estado Civil es requerido"),date_of_birth:s.Z_().required("Fecha de Nacimiento es requerido"),address1:s.Z_().required("Direccion 1 es requerido"),phone:s.Z_().required("Telefono es requerido"),cellphone:s.Z_().required("Celular es requerido"),email:s.Z_().required("E-Mail es requerido"),job_title:s.Z_().required("Ocupacion es requerido"),health_insurance:s.Z_().required("EPS es requerido"),level_of_education:s.Z_().required("Escolaridad es requerido"),admission_date:s.Z_().required("Fecha de Ingreso es requerido"),second_date:s.Z_().required("Fecha de Ingreso (por segunda vez) es requerido"),third_date:s.Z_().required("Fecha de Ingreso (por tercera vez) es requerido"),responsible_adult:s.Z_().required("Acudiente es requerido"),responsible_adult_code:s.Z_().required("Documento del acudiente es requerido"),relationship:s.Z_().required("Parentesco es requerido"),responsible_adult_phone:s.Z_().required("Telefono es requerido"),responsible_adult_cellphone:s.Z_().required("Celular es requerido"),drug_id:s.Z_().required("Droga de impacto es requerido"),orientation:s.Z_().required("Ubicacion (Tiempo - Espacio - Persona) es requerido"),body_language:s.Z_().required("Lenguaje corporal es requerido"),ideation:s.Z_().required("Ideacion o intento suicida es requerido"),delusions:s.Z_().required("Delirios es requerido"),hallucinations:s.Z_().required("Alucinaciones es requerido"),eating_problems:s.Z_().required("Problemas de alimentacion es requerido"),treatment_motivations:s.Z_().required("Motivacion al tratamiento es requerido"),comments:s.Z_().required("Observaciones es requerido"),employee_id:s.Z_().required("Funcionario es requerido"),status:s.Z_().required("Estado es requerido")}),Z=r.Z.masters.patients.base;let v=[{label:"DNI",value:"DNI"},{label:"RUC",value:"RUC"},{label:"TI",value:"TI"},{label:"CEDULA",value:"CEDULA"}],f=[{label:"Masculino",value:"Masculino"},{label:"Femenino",value:"Femenino"},{label:"No binario",value:"No binario"},{label:"Prefiero no especificar",value:"Prefiero no especificar"}],q=[{label:"Soltero(a)",value:"Soltero(a)"},{label:"Casado(a)",value:"Casado(a)"},{label:"Union Libre",value:"Union Libre"},{label:"Separado(a)",value:"Separado(a)"},{label:"Divorciado(a)",value:"Divorciado(a)"},{label:"Viudo(a)",value:"Viudo(a)"}],P=[],N=[{label:"Egreso",value:"Egreso"},{label:"Abandono",value:"Abandono"},{label:"Fuga",value:"Fuga"},{label:"Remision",value:"Remision"},{label:"Expulsion",value:"Expulsion"}],y=[{label:"Egreso",value:"Egreso"},{label:"Abandono",value:"Abandono"},{label:"Fuga",value:"Fuga"},{label:"Remision",value:"Remision"},{label:"Expulsion",value:"Expulsion"}],E=[{label:"Egreso",value:"Egreso"},{label:"Abandono",value:"Abandono"},{label:"Fuga",value:"Fuga"},{label:"Remision",value:"Remision"},{label:"Expulsion",value:"Expulsion"}],F=[];const C={document_type:"",code:!1,name:!1,image:null,gender:"",marital_status:"",date_of_birth:!1,address1:!1,address2:!1,phone:!1,cellphone:!1,email:!1,job_title:!1,health_insurance:!1,level_of_education:!1,admission_date:!1,second_date:!1,third_date:!1,responsible_adult:!1,responsible_adult_code:!1,relationship:!1,responsible_adult_phone:!1,responsible_adult_cellphone:!1,drug_id:null,orientation:!1,body_language:!1,ideation:!1,delusions:!1,hallucinations:!1,eating_problems:!1,treatment_motivations:!1,end_date:!1,cause_of_end:"",end_date_second:!1,cause_of_end_second:"",end_date_third:!1,cause_of_end_third:"",comments:!1,employee_id:null,status:1},R=e=>e.map((e=>({value:e.id,label:e.name}))),I=(0,m.p5)((0,m.Tg)((e=>{let{id:n,doGet:a,genericException:s,appSuccess:m,doPost:I,doPut:D,doPostFormData:A,appInfo:w,setEditable:S,viewMode:z,refresh:U}=e;const T=(0,_.s0)(),[L,K]=(0,o.useState)(C),[O,k]=(0,o.useState)(!0),[M,G]=(0,o.useState)(null),V=(0,o.useCallback)((async()=>{const e={url:r.Z.masters.patients.initForm,data:n?{id:n}:{}};return await a(e)}),[a,n,U,S]),J=(0,o.useCallback)((async()=>{try{const{patients:e,drug:n,employee:a}=await V();P=R(n),F=R(a);const{document_type:o,code:i,name:t,image:s,gender:l,marital_status:d,date_of_birth:r,address1:c,address2:m,phone:u,cellphone:_,email:p,job_title:h,health_insurance:b,level_of_education:g,admission_date:j,second_date:Z,third_date:v,responsible_adult:f,responsible_adult_code:q,relationship:N,responsible_adult_phone:y,responsible_adult_cellphone:E,drug_id:C,orientation:I,body_language:D,ideation:A,delusions:w,hallucinations:S,eating_problems:z,treatment_motivations:U,end_date:T,cause_of_end:L,end_date_second:O,cause_of_end_second:M,end_date_third:G,cause_of_end_third:J,comments:$,employee_id:B,status:H}=e;K({document_type:o||"",code:i||"",name:t||"",image:s||"",gender:l||"",marital_status:d||"",date_of_birth:r||"",address1:c||"",address2:m||"",phone:u||"",cellphone:_||"",email:p||"",job_title:h||"",health_insurance:b||"",level_of_education:g||"",admission_date:j||"",second_date:Z||"",third_date:v||"",responsible_adult:f||"",responsible_adult_code:q||"",relationship:N||"",responsible_adult_phone:y||"",responsible_adult_cellphone:E||"",drug_id:C||null,orientation:I||"",body_language:D||"",ideation:A||"",delusions:w||"",hallucinations:S||"",eating_problems:z||"",treatment_motivations:U||"",end_date:T||"",cause_of_end:L||"",end_date_second:O||"",cause_of_end_second:M||"",end_date_third:G||"",cause_of_end_third:J||"",comments:$||"",employee_id:B||null,status:(0,x.rp)(H)||"Activo"}),k(!1)}catch(e){console.log("ERROR AL INICIAR"+e),s(e)}}),[s,V]);(0,o.useEffect)((()=>{J()}),[J]);const $=e=>{T("".concat("/app/general/masters/patients","/edit/").concat(e),{replace:!1})};return(0,g.jsx)(g.Fragment,{children:O?(0,g.jsx)(p.Z,{p:10,children:(0,g.jsx)(l.aN,{})}):(0,g.jsx)(t.J9,{enableReinitialize:!0,initialValues:L,validationSchema:j,onSubmit:async e=>{const a=(e=>{const{document_type:n,code:a,name:o,image:i,gender:t,marital_status:s,date_of_birth:l,address1:d,address2:r,phone:c,cellphone:m,email:u,job_title:_,health_insurance:p,level_of_education:h,admission_date:b,second_date:g,third_date:j,responsible_adult:Z,responsible_adult_code:v,relationship:f,responsible_adult_phone:q,responsible_adult_cellphone:P,drug_id:N,orientation:y,body_language:E,ideation:F,delusions:C,hallucinations:R,eating_problems:I,treatment_motivations:D,end_date:A,cause_of_end:w,end_date_second:S,cause_of_end_second:z,end_date_third:U,cause_of_end_third:T,comments:L,employee_id:K,status:O}=e;return{document_type:n,code:a,name:o,image:i,gender:t,marital_status:s,date_of_birth:l,address1:d,address2:r,phone:c,cellphone:m,email:u,job_title:_,health_insurance:p,level_of_education:h,admission_date:b,second_date:g,third_date:j,responsible_adult:Z,responsible_adult_code:v,relationship:f,responsible_adult_phone:q,responsible_adult_cellphone:P,drug_id:N,orientation:y,body_language:E,ideation:F,delusions:C,hallucinations:R,eating_problems:I,treatment_motivations:D,end_date:A,cause_of_end:w,end_date_second:S,cause_of_end_second:z,end_date_third:U,cause_of_end_third:T,comments:L,employee_id:K,status:(0,x.HY)(O)}})(e),o=new FormData;var i;o.append("image",a.image),o.append("avatar",await(i=a.image,new Promise(((e,n)=>{const a=new FileReader;a.onloadend=()=>e(a.result),a.onerror=n,a.readAsDataURL(i)}))));for(const n in a)a.hasOwnProperty(n)&&o.append(n,a[n]);const t={url:"".concat(Z,"/").concat(n),data:o};try{const e=await A(t);n?(w(c.Z.crud.update),$(e.response.data.id)):(m(c.Z.crud.new),$(e.response.data.id))}catch(l){console.log("ERROR AL GUARDAR "+l),s(l)}},children:e=>(0,g.jsxs)(t.l0,{children:[(0,g.jsx)(u.Au,{formProps:e}),(0,g.jsxs)(i.ZP,{container:!0,direction:"row",spacing:2,children:[(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(b.Z,{file:M||(L.image?"".concat(L.image):null),onDrop:e=>{const n=e[0];if(n){const e=new FileReader;e.onloadend=()=>{G(e.result),K((e=>({...e,image:n})))},e.readAsDataURL(n)}},accept:"image/*",caption:(0,g.jsx)(d.Z,{variant:"caption",children:"Cargue la foto del paciente"})})}),(0,g.jsx)(i.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Tipo de documento",name:"document_type",component:l.Ky,items:v})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Numero",name:"code",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Nombres",name:"name",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Genero",name:"gender",component:l.Ky,items:f})}),(0,g.jsx)(i.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Estado Civil",name:"marital_status",component:l.Ky,items:q})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Fecha de Nacimiento",name:"date_of_birth",component:h.Z})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Direccion 1",name:"address1",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Direccion 2",name:"address2",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Telefono",name:"phone",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Celular",name:"cellphone",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"E-Mail",name:"email",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Ocupacion",name:"job_title",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"EPS",name:"health_insurance",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Escolaridad",name:"level_of_education",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Fecha de Ingreso",name:"admission_date",component:h.Z})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Fecha de Ingreso (por segunda vez)",name:"second_date",component:h.Z})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Fecha de Ingreso (por tercera vez)",name:"third_date",component:h.Z})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Acudiente",name:"responsible_adult",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Documento del acudiente",name:"responsible_adult_code",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Parentesco",name:"relationship",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Telefono",name:"responsible_adult_phone",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Celular",name:"responsible_adult_cellphone",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Droga de impacto",name:"drug_id",component:l.Ky,items:P})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Ubicacion (Tiempo - Espacio - Persona)",name:"orientation",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Lenguaje corporal",name:"body_language",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Ideacion o intento suicida",name:"ideation",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Delirios",name:"delusions",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Alucinaciones",name:"hallucinations",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Problemas de alimentacion",name:"eating_problems",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Motivacion al tratamiento",name:"treatment_motivations",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Fecha de Salida",name:"end_date",component:h.Z})}),(0,g.jsx)(i.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Causa de salida",name:"cause_of_end",component:l.Ky,items:N})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Fecha de Salida (Por segunda vez)",name:"end_date_second",component:h.Z})}),(0,g.jsx)(i.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Causa de salida (Por segunda vez)",name:"cause_of_end_second",component:l.Ky,items:y})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Fecha de Salida (Por tercera vez)",name:"end_date_third",component:h.Z})}),(0,g.jsx)(i.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Causa de salida (Por tercera vez)",name:"cause_of_end_third",component:l.Ky,items:E})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Observaciones",name:"comments",component:l.dn})}),(0,g.jsx)(i.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Funcionario",name:"employee_id",component:l.Ky,items:F})}),(0,g.jsx)(i.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(t.gN,{label:"Estado",name:"status",component:l.dn,disabled:!0})})]})]})})})})))},7870:(e,n,a)=>{a.d(n,{FK:()=>l,e_:()=>t,f2:()=>s,oe:()=>d});a(763);var o=a(26098),i=a.n(o);function t(e){return i()(e).format(Number.isInteger(e)?"$0,0":"$0,0.00")}function s(e){return i()(e/100).format("0.0%")}function l(e){return i()(e).format()}function d(e){return i()(e).format("0.0 b")}},82337:(e,n,a)=>{a.d(n,{Z:()=>s});var o=a(33359),i=a(23814);const t=(0,a(59703).Z)("MuiBox",["root"]),s=(0,i.Z)({defaultClassName:t.root,generateClassName:o.Z.generate})}}]);
//# sourceMappingURL=145.6a6662e3.chunk.js.map