"use strict";(self.webpackChunkoasis_front=self.webpackChunkoasis_front||[]).push([[145],{99938:(e,n,a)=>{a.d(n,{Z:()=>b});var o=a(763),t=a(62711),l=a(18267),s=a(40642),i=a(66934),d=a(43616),r=a(35527),c=a(16029),m=a(20890),u=a(7870),_=a(80184);const p=(0,i.ZP)("div")((e=>{let{theme:n}=e;return{width:144,height:144,margin:"auto",borderRadius:"50%",padding:n.spacing(1),border:"1px dashed ".concat(n.palette.grey[50032])}})),x=(0,i.ZP)("div")({zIndex:0,width:"100%",height:"100%",outline:"none",display:"flex",overflow:"hidden",borderRadius:"50%",position:"relative",alignItems:"center",justifyContent:"center","& > *":{width:"100%",height:"100%"},"&:hover":{cursor:"pointer","& .placeholder":{zIndex:9}}}),h=(0,i.ZP)("div")((e=>{let{theme:n}=e;return{display:"flex",position:"absolute",alignItems:"center",flexDirection:"column",justifyContent:"center",color:n.palette.text.secondary,backgroundColor:n.palette.background.neutral,transition:n.transitions.create("opacity",{easing:n.transitions.easing.easeInOut,duration:n.transitions.duration.shorter}),"&:hover":{opacity:.72}}}));function b(e){let{error:n,file:a,caption:i,sx:b,...g}=e;const{getRootProps:j,getInputProps:Z,isDragActive:v,isDragReject:f,fileRejections:P}=(0,l.uI)({multiple:!1,...g}),N=()=>(0,_.jsx)(r.Z,{variant:"outlined",sx:{py:1,px:2,my:2,borderColor:"error.light",bgcolor:e=>(0,d.Fq)(e.palette.error.main,.08)},children:P.map((e=>{let{file:n,errors:a}=e;const{path:o,size:t}=n;return(0,_.jsxs)(c.Z,{sx:{my:1},children:[(0,_.jsxs)(m.Z,{variant:"subtitle2",noWrap:!0,children:[o," - ",(0,u.oe)(t)]}),a.map((e=>(0,_.jsxs)(m.Z,{variant:"caption",component:"p",children:["- ",e.message]},e.code)))]},o)}))});return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p,{sx:b,children:(0,_.jsxs)(x,{...j(),sx:{...v&&{opacity:.72},...(f||n)&&{color:"error.main",borderColor:"error.light",bgcolor:"error.lighter"}},children:[(0,_.jsx)("input",{...Z()}),a&&(0,_.jsx)(c.Z,{component:"img",alt:"avatar",src:(0,o.isString)(a)?a:a.preview,sx:{zIndex:8,objectFit:"cover"}}),(0,_.jsxs)(h,{className:"placeholder",sx:{...a&&{opacity:0,color:"common.white",bgcolor:"grey.900","&:hover":{opacity:.72}}},children:[(0,_.jsx)(c.Z,{component:t.JO,icon:s.Z,sx:{width:24,height:24,mb:1}}),(0,_.jsx)(m.Z,{variant:"caption",children:a?"Update photo":"Upload photo"})]})]})}),i,P.length>0&&(0,_.jsx)(N,{})]})}},61145:(e,n,a)=>{a.d(n,{Z:()=>D});var o=a(72791),t=a(61889),l=a(92506),s=a(81724),i=a(87284),d=a(20890),r=a(38314),c=a(32325),m=a(96172),u=a(40720),_=a(57689),p=a(82337),x=a(43849),h=a(92983),b=a(99938),g=a(80184);const j=s.Ry({document_type:s.Z_().required("Tipo de documento es requerido"),code:s.Z_().required("Numero es requerido"),name:s.Z_().required("Nombres es requerido"),gender:s.Z_().required("Genero es requerido"),cellphone:s.Z_().required("Celular es requerido"),drug_id:s.Z_().required("Droga de impacto es requerido"),employee_id:s.Z_().required("Funcionario es requerido"),status:s.Z_().required("Estado es requerido")}),Z=r.Z.masters.patients.base;let v=[{label:"DNI",value:"DNI"},{label:"RUC",value:"RUC"},{label:"TI",value:"TI"},{label:"CEDULA",value:"CEDULA"}],f=[{label:"Masculino",value:"Masculino"},{label:"Femenino",value:"Femenino"},{label:"No binario",value:"No binario"},{label:"Prefiero no especificar",value:"Prefiero no especificar"}],P=[{label:"Soltero(a)",value:"Soltero(a)"},{label:"Casado(a)",value:"Casado(a)"},{label:"Union Libre",value:"Union Libre"},{label:"Separado(a)",value:"Separado(a)"},{label:"Divorciado(a)",value:"Divorciado(a)"},{label:"Viudo(a)",value:"Viudo(a)"}],N=[],y=[{label:"Egreso",value:"Egreso"},{label:"Abandono",value:"Abandono"},{label:"Fuga",value:"Fuga"},{label:"Remision",value:"Remision"},{label:"Expulsion",value:"Expulsion"}],R=[{label:"Egreso",value:"Egreso"},{label:"Abandono",value:"Abandono"},{label:"Fuga",value:"Fuga"},{label:"Remision",value:"Remision"},{label:"Expulsion",value:"Expulsion"}],E=[{label:"Egreso",value:"Egreso"},{label:"Abandono",value:"Abandono"},{label:"Fuga",value:"Fuga"},{label:"Remision",value:"Remision"},{label:"Expulsion",value:"Expulsion"}],F=[];const C={document_type:"",code:!1,name:!1,image:null,gender:"",marital_status:"",date_of_birth:!1,age:"",address1:!1,address2:!1,phone:!1,cellphone:!1,email:!1,job_title:!1,health_insurance:!1,level_of_education:!1,admission_date:!1,second_date:!1,third_date:!1,responsible_adult:!1,responsible_adult_code:!1,relationship:!1,responsible_adult_phone:!1,responsible_adult_cellphone:!1,drug_id:null,orientation:!1,body_language:!1,ideation:!1,delusions:!1,hallucinations:!1,eating_problems:!1,treatment_motivations:!1,end_date:!1,cause_of_end:"",end_date_second:!1,cause_of_end_second:"",end_date_third:!1,cause_of_end_third:"",comments:!1,employee_id:null,status:1},w=e=>e.map((e=>({value:e.id,label:e.name}))),D=(0,m.p5)((0,m.Tg)((e=>{let{id:n,doGet:a,genericException:s,appSuccess:m,doPost:D,doPut:I,doPostFormData:A,appInfo:q,setEditable:S,viewMode:U,refresh:z}=e;const K=(0,_.s0)(),[L,k]=(0,o.useState)(C),[T,O]=(0,o.useState)(!0),[M,G]=(0,o.useState)(null),V=(0,o.useCallback)((async()=>{const e={url:r.Z.masters.patients.initForm,data:n?{id:n}:{}};return await a(e)}),[a,n,z,S]),J=(0,o.useCallback)((async()=>{try{const{patients:e,drug:n,employee:a}=await V();N=w(n),F=w(a);const{document_type:o,code:t,name:l,image:s,gender:i,marital_status:d,date_of_birth:r,age:c,address1:m,address2:u,phone:_,cellphone:p,email:h,job_title:b,health_insurance:g,level_of_education:j,admission_date:Z,second_date:v,third_date:f,responsible_adult:P,responsible_adult_code:y,relationship:R,responsible_adult_phone:E,responsible_adult_cellphone:C,drug_id:D,orientation:I,body_language:A,ideation:q,delusions:S,hallucinations:U,eating_problems:z,treatment_motivations:K,end_date:L,cause_of_end:T,end_date_second:M,cause_of_end_second:G,end_date_third:J,cause_of_end_third:$,comments:B,employee_id:H,status:W}=e;k({document_type:o||"",code:t||"",name:l||"",image:s||"",gender:i||"",marital_status:d||"",date_of_birth:r||"",age:c||"",address1:m||"",address2:u||"",phone:_||"",cellphone:p||"",email:h||"",job_title:b||"",health_insurance:g||"",level_of_education:j||"",admission_date:Z||"",second_date:v||"",third_date:f||"",responsible_adult:P||"",responsible_adult_code:y||"",relationship:R||"",responsible_adult_phone:E||"",responsible_adult_cellphone:C||"",drug_id:D||null,orientation:I||"",body_language:A||"",ideation:q||"",delusions:S||"",hallucinations:U||"",eating_problems:z||"",treatment_motivations:K||"",end_date:L||"",cause_of_end:T||"",end_date_second:M||"",cause_of_end_second:G||"",end_date_third:J||"",cause_of_end_third:$||"",comments:B||"",employee_id:H||null,status:(0,x.rp)(W)||"Activo"}),O(!1)}catch(e){console.log("ERROR AL INICIAR"+e),s(e)}}),[s,V]);(0,o.useEffect)((()=>{J()}),[J]);const $=e=>{K("".concat("/app/general/masters/patients","/edit/").concat(e),{replace:!1})};return(0,g.jsx)(g.Fragment,{children:T?(0,g.jsx)(p.Z,{p:10,children:(0,g.jsx)(i.aN,{})}):(0,g.jsx)(l.J9,{enableReinitialize:!0,initialValues:L,validationSchema:j,onSubmit:async e=>{const a=(e=>{const{document_type:n,code:a,name:o,image:t,gender:l,marital_status:s,date_of_birth:i,address1:d,address2:r,phone:c,cellphone:m,email:u,job_title:_,health_insurance:p,level_of_education:h,admission_date:b,second_date:g,third_date:j,responsible_adult:Z,responsible_adult_code:v,relationship:f,responsible_adult_phone:P,responsible_adult_cellphone:N,drug_id:y,orientation:R,body_language:E,ideation:F,delusions:C,hallucinations:w,eating_problems:D,treatment_motivations:I,end_date:A,cause_of_end:q,end_date_second:S,cause_of_end_second:U,end_date_third:z,cause_of_end_third:K,comments:L,employee_id:k,status:T}=e;return{document_type:n,code:a,name:o,image:t,gender:l,marital_status:s,date_of_birth:i,address1:d,address2:r,phone:c,cellphone:m,email:u,job_title:_,health_insurance:p,level_of_education:h,admission_date:b,second_date:g,third_date:j,responsible_adult:Z,responsible_adult_code:v,relationship:f,responsible_adult_phone:P,responsible_adult_cellphone:N,drug_id:y,orientation:R,body_language:E,ideation:F,delusions:C,hallucinations:w,eating_problems:D,treatment_motivations:I,end_date:A,cause_of_end:q,end_date_second:S,cause_of_end_second:U,end_date_third:z,cause_of_end_third:K,comments:L,employee_id:k,status:(0,x.HY)(T)}})(e),o=new FormData;var t;o.append("image",a.image),o.append("avatar",await(t=a.image,new Promise(((e,n)=>{const a=new FileReader;a.onloadend=()=>e(a.result),a.onerror=n,a.readAsDataURL(t)}))));for(const n in a)a.hasOwnProperty(n)&&o.append(n,a[n]);const l={url:n?"".concat(Z,"/").concat(n):Z,data:o};try{const e=await A(l);n?(q(c.Z.crud.update),$(e.response.data.id)):(m(c.Z.crud.new),$(e.response.data.id))}catch(i){console.log("ERROR AL GUARDAR "+i),s(i)}},children:e=>(0,g.jsxs)(l.l0,{children:[(0,g.jsx)(u.Au,{formProps:e}),(0,g.jsxs)(t.ZP,{container:!0,direction:"row",spacing:2,children:[(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(b.Z,{file:M||(L.image?"".concat(L.image):null),onDrop:e=>{const n=e[0];if(n){const e=new FileReader;e.onloadend=()=>{G(e.result),k((e=>({...e,image:n})))},e.readAsDataURL(n)}},accept:"image/*",caption:(0,g.jsx)(d.Z,{variant:"caption",children:"Cargue la foto del paciente"})})}),(0,g.jsx)(t.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Tipo de documento",name:"document_type",component:i.Ky,items:v})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Numero",name:"code",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Nombres",name:"name",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Genero",name:"gender",component:i.Ky,items:f})}),(0,g.jsx)(t.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Estado Civil",name:"marital_status",component:i.Ky,items:P})}),(0,g.jsx)(t.ZP,{item:!0,xs:3,md:3,xl:3,children:(0,g.jsx)(l.gN,{label:"Fecha de Nacimiento",name:"date_of_birth",component:h.Z})}),(0,g.jsx)(t.ZP,{item:!0,xs:3,md:3,xl:3,children:(0,g.jsx)(l.gN,{label:"Edad",name:"age",component:i.dn,disabled:!0})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Direccion 1",name:"address1",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Direccion 2",name:"address2",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Telefono",name:"phone",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Celular",name:"cellphone",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"E-Mail",name:"email",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Ocupacion",name:"job_title",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"EPS",name:"health_insurance",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Escolaridad",name:"level_of_education",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Fecha de Ingreso",name:"admission_date",component:h.Z})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Fecha de Ingreso (por segunda vez)",name:"second_date",component:h.Z})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Fecha de Ingreso (por tercera vez)",name:"third_date",component:h.Z})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Acudiente",name:"responsible_adult",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Documento del acudiente",name:"responsible_adult_code",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Parentesco",name:"relationship",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Telefono",name:"responsible_adult_phone",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Celular",name:"responsible_adult_cellphone",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Droga de impacto",name:"drug_id",component:i.Ky,items:N})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Ubicaci\xf3n (Tiempo - Espacio - Persona)",name:"orientation",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Lenguaje corporal",name:"body_language",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Ideaci\xf3n o intento suicida",name:"ideation",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Delirios",name:"delusions",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Alucinaciones",name:"hallucinations",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Problemas de alimentaci\xf3n",name:"eating_problems",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Motivaci\xf3n al tratamiento",name:"treatment_motivations",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Fecha de Salida",name:"end_date",component:h.Z})}),(0,g.jsx)(t.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Causa de salida",name:"cause_of_end",component:i.Ky,items:y})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Fecha de Salida (Por segunda vez)",name:"end_date_second",component:h.Z})}),(0,g.jsx)(t.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Causa de salida (Por segunda vez)",name:"cause_of_end_second",component:i.Ky,items:R})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Fecha de Salida (Por tercera vez)",name:"end_date_third",component:h.Z})}),(0,g.jsx)(t.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Causa de salida (Por tercera vez)",name:"cause_of_end_third",component:i.Ky,items:E})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Observaciones",name:"comments",component:i.dn})}),(0,g.jsx)(t.ZP,{item:!0,xs:6,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Funcionario",name:"employee_id",component:i.Ky,items:F})}),(0,g.jsx)(t.ZP,{item:!0,xs:12,md:6,xl:6,children:(0,g.jsx)(l.gN,{label:"Estado",name:"status",component:i.dn,disabled:!0})})]})]})})})})))},7870:(e,n,a)=>{a.d(n,{FK:()=>i,e_:()=>l,f2:()=>s,oe:()=>d});a(763);var o=a(26098),t=a.n(o);function l(e){return t()(e).format(Number.isInteger(e)?"$0,0":"$0,0.00")}function s(e){return t()(e/100).format("0.0%")}function i(e){return t()(e).format()}function d(e){return t()(e).format("0.0 b")}},82337:(e,n,a)=>{a.d(n,{Z:()=>s});var o=a(33359),t=a(23814);const l=(0,a(59703).Z)("MuiBox",["root"]),s=(0,t.Z)({defaultClassName:l.root,generateClassName:o.Z.generate})}}]);
//# sourceMappingURL=145.05617dd8.chunk.js.map